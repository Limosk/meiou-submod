country_event = {
    id = POP_Census.001
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		korea_region = {
			limit = {
				has_province_flag = Manchu_Zone
				culture_group = korean_group
			}
			clr_province_flag = Manchu_Zone
		}
		shaanbei_area = {
			limit = {
				has_province_flag = EastSteppe_Zone
				is_year = 1420
			}
			clr_province_flag = EastSteppe_Zone
		}
		longxi_area = {
			limit = {
				has_province_flag = EastSteppe_Zone
				is_year = 1420
			}
			clr_province_flag = EastSteppe_Zone
		}
		liaoning_area = {
			if = {
				limit = {
					owner = {
						OR = {
							culture_group = altaic
							culture_group = jurchen_group
							culture_group = tartar_group
							culture_group = nivkh_group
							culture_group = old_turkic
							culture_group = tungusic
						}
					}
				}
				set_province_flag = Manchu_Zone
			}
			else = {
				clr_province_flag = Manchu_Zone
			}
		}
		regiongroup = {
			region = {
				limit = {
					isValidProv = yes
				}
				if = {
					limit = {
						Columbian_Exchange = 100
					}
					if = {
						limit = {
							has_province_flag = no_horses_present
						}
						clr_province_flag = no_horses_present
					}
					if = {
						limit = {
							NOT = { has_province_flag = Exchange_Complete }
						}
						if = {
							limit = {
								NOT = { check_key = { lhs = Land_WheatAvailability value = 100 } }
							}
							change_key = { lhs = Land_WheatAvailability value = 10 }
						}
						if = {
							limit = {
								NOT = { check_key = { lhs = Land_RiceAvailability value = 100 } }
							}
							change_key = { lhs = Land_RiceAvailability value = 10 }
						}
						if = {
							limit = {
								NOT = { check_key = { lhs = Land_MilletAvailability value = 100 } }
							}
							change_key = { lhs = Land_MilletAvailability value = 10 }
						}
						if = {
							limit = {
								NOT = { check_key = { lhs = Land_BarleyAvailability value = 100 } }
							}
							change_key = { lhs = Land_BarleyAvailability value = 10 }
						}
						if = {
							limit = {
								NOT = { check_key = { lhs = Land_MaizeAvailability value = 100 } }
							}
							change_key = { lhs = Land_MaizeAvailability value = 10 }
						}
						if = {
							limit = {
								NOT = { check_key = { lhs = Land_PotatoAvailability value = 100 } }
							}
							change_key = { lhs = Land_PotatoAvailability value = 10 }
						}
						Land_CalcCrops = yes
						if = {
							limit = {
								check_key = { lhs = Land_WheatAvailability value = 100 }
								check_key = { lhs = Land_RiceAvailability value = 100 }
								check_key = { lhs = Land_MilletAvailability value = 100 }
								check_key = { lhs = Land_BarleyAvailability value = 100 }
								check_key = { lhs = Land_MaizeAvailability value = 100 }
								check_key = { lhs = Land_PotatoAvailability value = 100 }
							}
							set_province_flag = Exchange_Complete
						}
					}
				}
				set_key = { lhs = Infra_Income value = 0 }
				set_key = { lhs = Infra_Spend value = 0 }
				set_key = { lhs = Infra_6 value = 0 }
				set_key = { lhs = Infra_22 value = 0 }
				set_key = { lhs = Infra_23 value = 0 }
				set_key = { lhs = Infra_24 value = 0 }
				set_key = { lhs = Infra_41 value = 0 }
				set_key = { lhs = Infra_R value = 0 }
				set_key = { lhs = Infra_UL value = 0 }
				set_key = { lhs = Building_R value = 0 }
				set_key = { lhs = Building_UL value = 0 }

				set_key = { lhs = Infra_StateSpend value = 0 }
				set_key = { lhs = Infra_State6 value = 0 }
				set_key = { lhs = Infra_State22 value = 0 }
				set_key = { lhs = Infra_State23 value = 0 }
				set_key = { lhs = Infra_State24 value = 0 }
				set_key = { lhs = Infra_State41 value = 0 }
				set_key = { lhs = Infra_StateR value = 0 }
				set_key = { lhs = Infra_StateUL value = 0 }

				Infra_SetMaintInfra = { type = Pathing prod1 = 6 prod2 = 24 labor = R }
				Infra_SetMaintInfra = { type = Harbourage prod1 = 23 prod2 = 24 labor = UL }
				Infra_SetMaintInfra = { type = Amenities prod1 = 24 prod2 = 41 labor = UL }
				Infra_SetMaintInfra = { type = Irrigation prod1 = 6 labor = R }
				Infra_SetMaintInfra = { type = Capitol prod1 = 24 prod2 = 41 labor = UL StateBased=yes  }
				Infra_SetMaintInfra = { type = Courthouse prod1 = 24 prod2 = 41 labor = UL StateFunded=yes }
				Infra_SetMaintInfra = { type = Garrison prod1 = 22 prod2 = 24 labor = R }

				Infra_SetFillInfra = yes

				set_key = { lhs = Infra_Building6 value = 0 }
				set_key = { lhs = Infra_Building22 value = 0 }
				set_key = { lhs = Infra_Building23 value = 0 }
				set_key = { lhs = Infra_Building24 value = 0 }
				set_key = { lhs = Infra_Building41 value = 0 }
				set_key = { lhs = Infra_BuildingR value = 0 }
				set_key = { lhs = Infra_BuildingUL value = 0 }

				if = {
					limit = {
						has_province_flag = Infra_S0
					}
					change_key = { lhs = Infra_Building6 which = Infra_S06 }
					change_key = { lhs = Infra_Building22 which = Infra_S022 }
					change_key = { lhs = Infra_Building23 which = Infra_S023 }
					change_key = { lhs = Infra_Building24 which = Infra_S024 }
					change_key = { lhs = Infra_Building41 which = Infra_S041 }
					change_key = { lhs = Infra_BuildingR which = Infra_S0R }
					change_key = { lhs = Infra_BuildingUL which = Infra_S0UL }
				}
				if = {
					limit = {
						has_province_flag = Infra_S1
					}
					change_key = { lhs = Infra_Building6 which = Infra_S16 }
					change_key = { lhs = Infra_Building22 which = Infra_S122 }
					change_key = { lhs = Infra_Building23 which = Infra_S123 }
					change_key = { lhs = Infra_Building24 which = Infra_S124 }
					change_key = { lhs = Infra_Building41 which = Infra_S141 }
					change_key = { lhs = Infra_BuildingR which = Infra_S1R }
					change_key = { lhs = Infra_BuildingUL which = Infra_S1UL }
				}
				if = {
					limit = {
						has_province_flag = Infra_S2
					}
					change_key = { lhs = Infra_Building6 which = Infra_S26 }
					change_key = { lhs = Infra_Building22 which = Infra_S222 }
					change_key = { lhs = Infra_Building23 which = Infra_S223 }
					change_key = { lhs = Infra_Building24 which = Infra_S224 }
					change_key = { lhs = Infra_Building41 which = Infra_S241 }
					change_key = { lhs = Infra_BuildingR which = Infra_S2R }
					change_key = { lhs = Infra_BuildingUL which = Infra_S2UL }
				}
				if = {
					limit = {
						has_province_flag = Infra_S3
					}
					change_key = { lhs = Infra_Building6 which = Infra_S36 }
					change_key = { lhs = Infra_Building22 which = Infra_S322 }
					change_key = { lhs = Infra_Building23 which = Infra_S323 }
					change_key = { lhs = Infra_Building24 which = Infra_S324 }
					change_key = { lhs = Infra_Building41 which = Infra_S341 }
					change_key = { lhs = Infra_BuildingR which = Infra_S3R }
					change_key = { lhs = Infra_BuildingUL which = Infra_S3UL }
				}
				if = {
					limit = {
						has_province_flag = Infra_S4
					}
					change_key = { lhs = Infra_Building6 which = Infra_S46 }
					change_key = { lhs = Infra_Building22 which = Infra_S422 }
					change_key = { lhs = Infra_Building23 which = Infra_S423 }
					change_key = { lhs = Infra_Building24 which = Infra_S424 }
					change_key = { lhs = Infra_Building41 which = Infra_S441 }
					change_key = { lhs = Infra_BuildingR which = Infra_S4R }
					change_key = { lhs = Infra_BuildingUL which = Infra_S4UL }
				}
				if = {
					limit = {
						has_province_flag = Infra_S5
					}
					change_key = { lhs = Infra_Building6 which = Infra_S56 }
					change_key = { lhs = Infra_Building22 which = Infra_S522 }
					change_key = { lhs = Infra_Building23 which = Infra_S523 }
					change_key = { lhs = Infra_Building24 which = Infra_S524 }
					change_key = { lhs = Infra_Building41 which = Infra_S541 }
					change_key = { lhs = Infra_BuildingR which = Infra_S5R }
					change_key = { lhs = Infra_BuildingUL which = Infra_S5UL }
				}
				if = {
					limit = {
						has_province_flag = Infra_S6
					}
					change_key = { lhs = Infra_Building6 which = Infra_S66 }
					change_key = { lhs = Infra_Building22 which = Infra_S622 }
					change_key = { lhs = Infra_Building23 which = Infra_S623 }
					change_key = { lhs = Infra_Building24 which = Infra_S624 }
					change_key = { lhs = Infra_Building41 which = Infra_S641 }
					change_key = { lhs = Infra_BuildingR which = Infra_S6R }
					change_key = { lhs = Infra_BuildingUL which = Infra_S6UL }
				}
				if = {
					limit = {
						has_province_flag = Infra_S7
					}
					change_key = { lhs = Infra_Building6 which = Infra_S76 }
					change_key = { lhs = Infra_Building22 which = Infra_S722 }
					change_key = { lhs = Infra_Building23 which = Infra_S723 }
					change_key = { lhs = Infra_Building24 which = Infra_S724 }
					change_key = { lhs = Infra_Building41 which = Infra_S741 }
					change_key = { lhs = Infra_BuildingR which = Infra_S7R }
					change_key = { lhs = Infra_BuildingUL which = Infra_S7UL }
				}
				if = {
					limit = {
						has_province_flag = Infra_S8
					}
					change_key = { lhs = Infra_Building6 which = Infra_S86 }
					change_key = { lhs = Infra_Building22 which = Infra_S822 }
					change_key = { lhs = Infra_Building23 which = Infra_S823 }
					change_key = { lhs = Infra_Building24 which = Infra_S824 }
					change_key = { lhs = Infra_Building41 which = Infra_S841 }
					change_key = { lhs = Infra_BuildingR which = Infra_S8R }
					change_key = { lhs = Infra_BuildingUL which = Infra_S8UL }
				}
				if = {
					limit = {
						has_province_flag = Infra_S9
					}
					change_key = { lhs = Infra_Building6 which = Infra_S96 }
					change_key = { lhs = Infra_Building22 which = Infra_S922 }
					change_key = { lhs = Infra_Building23 which = Infra_S923 }
					change_key = { lhs = Infra_Building24 which = Infra_S924 }
					change_key = { lhs = Infra_Building41 which = Infra_S941 }
					change_key = { lhs = Infra_BuildingR which = Infra_S9R }
					change_key = { lhs = Infra_BuildingUL which = Infra_S9UL }
				}

				Infra_SetMaint = { type = Agriculture food = 0.1 raw = 0.8 indust = 0.1 rate = 0.010 factor = 2 }
				Infra_SetMaint = { type = Forestry food = 0.3 raw = 0.6 indust = 0.1 rate = 0.010 factor = 2 }
				Infra_SetMaint = { type = Extraction food = 0.3 raw = 0.6 indust = 0.1 rate = 0.010 factor = 2 }
				Infra_SetMaint = { type = Fishery food = 0.1 raw = 0.8 indust = 0.1 rate = 0.010 factor = 2 }
				Infra_SetMaintCommercial = { type = Commercial food = 0.1 raw = 0.1 indust = 0.8 }
				Infra_SetMaint = { type = Industrial food = 0.1 raw = 0.3 indust = 0.6 rate = 0.010 factor = 2 }
				Infra_SetMaint = { type = Academic food = 0.1 raw = 0.1 indust = 0.8 rate = 0.019 factor = 1 }
			}
		}
		north_asia = {
			limit = {
				isValidProv = yes
				NOT = { has_province_flag = Siberia_Init }
				owner = {
					has_institution = Banking
					is_nomad = no
				}
			}
			set_province_flag = Siberia_Init
			clr_province_flag = Colony_Init
		}
		steppes_region = {
			limit = {
				NOT = { has_province_flag = Siberia_Init }
				isValidProv = yes
				owner = {
					has_institution = Banking
					is_nomad = no
				}
				NOT = { area = nogai_area }
			}
			set_province_flag = Siberia_Init
			clr_province_flag = Colony_Init
		}
		crimea_region = {
			limit = {
				NOT = { has_province_flag = Siberia_Init }
				isValidProv = yes
				owner = {
					has_institution = Banking
					is_nomad = no
				}
			}
			set_province_flag = Siberia_Init
			clr_province_flag = Colony_Init
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0012
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
        TN_PrepSector = yes
        TN_RefreshPrice = yes

		every_country = {
			limit = {
				isValidCountry = yes
			}
			set_key = { lhs = TN_Dole value = 0 }

			trigger_switch = {
				on_trigger = has_country_modifier

				BU_GrainDoleMinor = { set_key = { lhs = TN_Dole value = 0.3 } }
				BU_GrainDoleMajor = { set_key = { lhs = TN_Dole value = 0.6 } }
				BU_GrainDoleFull = { set_key = { lhs = TN_Dole value = 1 } }
			}
		}

		regiongroup = {
            region = {
                limit = {
                    isValidProv = yes
                }
				if = {
					limit = {
						OR = {
							owner = { has_country_flag = TN_Dole_Universal }
							AND = {
								is_overseas = no
							}
							has_province_modifier = trading_post_province
						}
						is_state = yes
					}
					set_key = { lhs = TN_Dole which = owner }
				}
				else = {
					set_key = { lhs = TN_Dole value = 0 }
				}

                TN_DoSupplyDemand = yes

				set_key = { lhs = Tariff_Income value = 0 }
            }
        }

        TN_SumSector = yes
        TN_ScoreSector = yes

		every_country = {
			limit = {
				isValidCountry = yes
			}
			set_key = { lhs = Tariff_Rate1 value = 0.2 }
			set_key = { lhs = Tariff_Rate2 value = 0.2 }
			set_key = { lhs = Tariff_Rate4 value = 0.2 }
			set_key = { lhs = Tariff_Rate5 value = 0.2 }
			set_key = { lhs = Tariff_Rate6 value = 0.2 }
			set_key = { lhs = Tariff_Rate9 value = 0.2 }
			set_key = { lhs = Tariff_Rate10 value = 0.2 }
			set_key = { lhs = Tariff_Rate21 value = 0.2 }
			set_key = { lhs = Tariff_Rate22 value = 0.2 }
			set_key = { lhs = Tariff_Rate23 value = 0.2 }
			set_key = { lhs = Tariff_Rate24 value = 0.2 }
			set_key = { lhs = Tariff_Rate25 value = 0.2 }
			set_key = { lhs = Tariff_Rate41 value = 0.2 }
		}

		regiongroup = {
			region = {
				limit = {
					has_province_flag = TN_SectorCent
					
					isValidProv = yes
				}
				Tariff_SetRate = yes
			}
		}

		regiongroup = {
			region = {
				limit = {
					has_province_flag = TN_SectorCent
				}
				TN_UpdateSubsistence = yes
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0013
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		
		if = {
			limit = {
				has_global_flag = POP_Sim10
			}
			every_province = {
				limit = {
					isValidProv = yes
				}
				trigger_switch = {
					on_trigger = has_province_flag
					
					TN_Major = {
						remove_province_modifier = TN_Important
						remove_province_modifier = TN_Minor
						
						add_permanent_province_modifier = {
							name = TN_Major
							duration = -1
						}
					}
					TN_Important = {
						if = {
							limit = {
								NOT = {
									has_province_modifier = TN_Major
								}
							}
							remove_province_modifier = TN_Minor
							
							add_permanent_province_modifier = {
								name = TN_Important
								duration = -1
							}
						}
					}
					TN_Minor = {
						if = {
							limit = {
								NOT = {
									has_province_modifier = TN_Major
									has_province_modifier = TN_Important
								}
							}
							add_permanent_province_modifier = {
								name = TN_Minor
								duration = -1
							}
						}
					}
				}
			}
		}
    }

    option = {
		name = no_localisation
    }
}
country_event = {
    id = POP_Census.707
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes
    
    is_triggered_only = yes
    trigger = {
        tag = AAA
    }
    
    immediate = {
		# Trade centers
		TNCenters = yes
		PNCenters = yes
		CityCenters = yes
	}

    option = {
		name = no_localisation
    }
}

country_event = { ### Forced tech upgrades
	id = POP_Census.708
	title = "no_localisation"
	desc = "no_localisation"
	picture = CITY_DEVELOPMENT_AU_eventPicture
	
	hidden = yes
	
	is_triggered_only = yes
	
	trigger = {
		ai = yes
		OR = {
			adm_power = 600
			dip_power = 600
			mil_power = 600
		}
	}
	
	immediate = {
		hidden_effect = { export_tech_cost = yes }
		adm_available = { output=Tech_Tmp1 }
		multiply_key = { lhs = Tech_Tmp1 value = 0.75 }
		set_key = { lhs = Tech_Tmp2 which = Tech_ADMCost }
		if = {
			limit = {
				check_key = { lhs = Tech_Tmp1 which = Tech_ADMCost }
			}
			log = "TECH_FIX added administrative tech to [This.GetName], costing [This.admin_cost.GetValue] adm points"
			hidden_effect = { scaled_admin_cost_country = { input=Tech_ADMCost } }
			add_adm_tech = 1
		}
		dip_available = { output=Tech_Tmp1 }
		multiply_key = { lhs = Tech_Tmp1 value = 0.75 }
		set_key = { lhs = Tech_Tmp2 which = Tech_DIPCost }
		if = {
			limit = {
				check_key = { lhs = Tech_Tmp1 which = Tech_DIPCost }
			}
			log = "TECH_FIX added diplomatic tech to [This.GetName], costing [This.diplo_cost.GetValue] dip points"
			hidden_effect = { scaled_diplo_cost_country = { input=Tech_DIPCost } }
			add_dip_tech = 1
		}
		mil_available = { output=Tech_Tmp1 }
		multiply_key = { lhs = Tech_Tmp1 value = 0.75 }
		set_key = { lhs = Tech_Tmp2 which = Tech_MILCost }
		if = {
			limit = {
				check_key = { lhs = Tech_Tmp1 which = Tech_MILCost }
			}
			log = "TECH_FIX added military tech to [This.GetName], costing [This.milit_cost.GetValue] mil points"
			hidden_effect = { scaled_milit_cost_country = { input=Tech_MILCost } }
			add_mil_tech = 1
		}
		
		hidden_effect = { set_key = { lhs = Tech_Tmp1 value = 0 } }
	}
	option = {
		name = "no_localisation"
	}
}

country_event = { ### Forced exploration idea group progression
	id = POP_Census.709
	title = "no_localisation"
	desc = "no_localisation"
	picture = CITY_DEVELOPMENT_AU_eventPicture
	
	hidden = yes
	is_triggered_only = yes
	
	trigger = {
		ai = yes
		dip_power = 300
		has_idea_group = exploration_ideas
		NOT = { has_idea = exploration_ideas_3 }
	}
	
	immediate = {
			if = {
				limit = {
					has_idea = exploration_ideas_2
				}
				add_idea = exploration_ideas_3
				add_dip_power = -250
				#_#_log = "SYS-CensusNew:[GetYear]:[This.GetName]:forced progressed to exploration_idea_3"
			}
			else_if = {
				limit = {
					has_idea = exploration_ideas_1
				}
				add_idea = exploration_ideas_2
				add_dip_power = -250
				#_#_log = "SYS-CensusNew:[GetYear]:[This.GetName]:forced progressed to exploration_idea_2"
			}
			else = {
				add_idea = exploration_ideas_1
				add_dip_power = -250
				#_#_log = "SYS-CensusNew:[GetYear]:[This.GetName]:forced progressed to exploration_idea_1"
			}
		}
	option = {
		name = "no_localisation"
	}
}

country_event = {
    id = POP_Census.0014
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

	# For now, needs on-map solutions
	#trigger = {
	#	has_global_flag = POP_Sim
	#}
    
    immediate = {
		every_country = {
            limit = {
                isValidCountry = yes
            }
            capital_scope = {
                if = {
                    limit = {
                        NOT = {
                            has_trade_modifier = {
                                who = owner
                                key = trade_capital
                            }
                        }
                    }
                    add_trade_modifier = {
                        who = owner
                        duration = 30
                        power = 1
                        key = trade_capital
                    }
                }
            }
			if = {
				limit = {
					is_colonial_nation = yes
				}
				overlord = {
					save_event_target_as = OverlordE
				}
				capital_scope = {
					if = {
						limit = {
							NOT = {
								has_trade_modifier = {
									who = event_target:OverlordE
									key = trade_capital
								}
							}
						}
						add_trade_modifier = {
							who = event_target:OverlordE
							duration = 30
							power = 1
							key = trade_capital
						}
					}
				}
			}
        }
		
		if = {
			limit = {
				has_global_flag = POP_Sim
			}			
			#chinese single market trade (internal routes)
			#Nanjing<->Wuchang
			2150 = {
				every_trade_node_member_province = {
					if = {
						limit = {
							is_capital = yes
							isValidProv = yes
						}
						owner = {
							1172 = {
								add_trade_modifier = {
									who = PREV
									duration = 2
									power = 1
									key = trade_capital
								}
							}
						}
					}
				}
			}
			1172 = {
				every_trade_node_member_province = {
					if = {
						limit = {
							is_capital = yes
							isValidProv = yes
						}
						owner = {
							2150 = {
								add_trade_modifier = {
									who = PREV
									duration = 2
									power = 1
									key = trade_capital
								}
							}
						}
					}
				}
			}
			#Nanjing<->Beijing
			2150 = {
				every_trade_node_member_province = {
					if = {
						limit = {
							is_capital = yes
							isValidProv = yes
						}
						owner = {
							708 = {
								add_trade_modifier = {
									who = PREV
									duration = 2
									power = 1
									key = trade_capital
								}
							}
						}
					}
				}
			}
			708 = {
				every_trade_node_member_province = {
					if = {
						limit = {
							is_capital = yes
							isValidProv = yes
						}
						owner = {
							2150 = {
								add_trade_modifier = {
									who = PREV
									duration = 2
									power = 1
									key = trade_capital
								}
							}
						}
					}
				}
			}
			# Xian<->Beijing
			2250 = {
				every_trade_node_member_province = {
					if = {
						limit = {
							is_capital = yes
							culture_group = chinese_group
							isValidProv = yes
						}
						owner = {
							708 = {
								add_trade_modifier = {
									who = PREV
									duration = 2
									power = 1
									key = trade_capital
								}
							}
						}
					}
				}
			}
			708 = {
				every_trade_node_member_province = {
					if = {
						limit = {
							is_capital = yes
							isValidProv = yes
						}
						owner = {
							2250 = {
								add_trade_modifier = {
									who = PREV
									duration = 2
									power = 1
									key = trade_capital
								}
							}
						}
					}
				}
			}
			# Wuchang->Sichuan
			685 = {
				every_trade_node_member_province = {
					if = {
						limit = {
							is_capital = yes
							isValidProv = yes
							culture_group = chinese_group
						}
						owner = {
							1172 = {
								add_trade_modifier = {
									who = PREV
									duration = 2
									power = 1
									key = trade_capital
								}
							}
						}
					}
				}
			}
			# Sichuan->Xian
			2252 = {
				every_trade_node_member_province = {
					if = {
						limit = {
							is_capital = yes
							isValidProv = yes
							culture_group = chinese_group
						}
						owner = {
							685 = {
								add_trade_modifier = {
									who = PREV
									duration = 2
									power = 1
									key = trade_capital
								}
							}
						}
					}
				}
			}
			# Wuchang<->Guangzhou
			1172 = {
				every_trade_node_member_province = {
					if = {
						limit = {
							is_capital = yes
							isValidProv = yes
							culture_group = chinese_group
						}
						owner = {
							2121 = {
								add_trade_modifier = {
									who = PREV
									duration = 2
									power = 1
									key = trade_capital
								}
							}
						}
					}
				}
			}
			2121 = {
				every_trade_node_member_province = {
					if = {
						limit = {
							is_capital = yes
							isValidProv = yes
							culture_group = chinese_group
						}
						owner = {
							1172 = {
								add_trade_modifier = {
									who = PREV
									duration = 2
									power = 1
									key = trade_capital
								}
							}
						}
					}
				}
			}
			# Nanjing<->Guangzhou
			2150 = {
				every_trade_node_member_province = {
					if = {
						limit = {
							is_capital = yes
							isValidProv = yes
							culture_group = chinese_group
						}
						owner = {
							2121 = {
								add_trade_modifier = {
									who = PREV
									duration = 2
									power = 1
									key = trade_capital
								}
							}
						}
					}
				}
			}
			2121 = {
				every_trade_node_member_province = {
					if = {
						limit = {
							is_capital = yes
							isValidProv = yes
							culture_group = chinese_group
						}
						owner = {
							2150 = {
								add_trade_modifier = {
									who = PREV
									duration = 2
									power = 1
									key = trade_capital
								}
							}
						}
					}
				}
			}
			#tibet<->bengal
			2263 = {
				if = {
					limit = {
						is_capital = yes
					}
					owner = {
						561 = {
							add_trade_modifier = {
								who = PREV
								duration = 2
								power = 1
								key = trade_capital
							}
						}
					}
				}
			}
		}
		
		#inter-italy trade
		101 = {
			every_trade_node_member_province = {
				if = {
					limit = {
						is_capital = yes
						isValidProv = yes
					}
					owner = {
						112 = {
							add_trade_modifier = {
								who = PREV
								duration = 360
								power = 1
								key = trade_capital
							}
						}
					}
				}
			}
		}
		112 = {
			every_trade_node_member_province = {
				if = {
					limit = {
						is_capital = yes
						isValidProv = yes
					}
					owner = {
						101 = {
							add_trade_modifier = {
								who = PREV
								duration = 360
								power = 1
								key = trade_capital
							}
						}
					}
				}
			}
		}
		
		#inter-mexico trade
		1471 = {
			every_trade_node_member_province = {
				if = {
					limit = {
						is_capital = yes
						isValidProv = yes
					}
					owner = {
						2415 = {
							add_trade_modifier = {
								who = PREV
								duration = 360
								power = 1
								key = trade_capital
							}
						}
					}
				}
			}
		}
		2415 = {
			every_trade_node_member_province = {
				if = {
					limit = {
						is_capital = yes
						isValidProv = yes
						owner = {
							NOT = { tag = CBS }
						}
					}
					owner = {
						1471 = {
							add_trade_modifier = {
								who = PREV
								duration = 2
								power = 1
								key = trade_capital
							}
						}
					}
				}
			}
		}
		#Interfrance trade
		#France<->South Med
		976 = {
			owner = {
				183 = {
					add_trade_modifier = {
						who = PREV
						duration = 2
						power = 1
						key = trade_capital
					}
				}
			}
		}
		2461 = {
			if = {
				limit = {
					isValidProv = yes
				}
				owner = {
					2293 = {
						add_trade_modifier = {
							who = PREV
							duration = 2
							power = 1
							key = trade_capital
						}
					}
				}
			}
		}
		2272 = {
			if = {
				limit = {
					isValidProv = yes
				}
				owner = {
					2293 = {
						add_trade_modifier = {
							who = PREV
							duration = 2
							power = 1
							key = trade_capital
						}
					}
				}
			}
		}
		3970 = {
			if = {
				limit = {
					isValidProv = yes
				}
				owner = {
					735 = {
						add_trade_modifier = {
							who = PREV
							duration = 2
							power = 1
							key = trade_capital
						}
					}
					2150 = {
						add_trade_modifier = {
							who = PREV
							duration = 2
							power = 1
							key = trade_capital
						}
					}
				}
			}
		}
		1015 = {
			if = {
				limit = {
					isValidProv = yes
				}
				owner = {
					735 = {
						add_trade_modifier = {
							who = PREV
							duration = 2
							power = 1
							key = trade_capital
						}
					}
					2150 = {
						add_trade_modifier = {
							who = PREV
							duration = 2
							power = 1
							key = trade_capital
						}
					}
				}
			}
		}
		1020 = {
			if = {
				limit = {
					isValidProv = yes
				}
				owner = {
					735 = {
						add_trade_modifier = {
							who = PREV
							duration = 2
							power = 1
							key = trade_capital
						}
					}
					2150 = {
						add_trade_modifier = {
							who = PREV
							duration = 2
							power = 1
							key = trade_capital
						}
					}
				}
			}
		}
		85 = {
			if = {
				limit = {
					is_capital = yes
					isValidProv = yes
				}
				owner = {
					183 = {
						add_trade_modifier = {
							who = PREV
							duration = 2
							power = 1
							key = trade_capital
						}
					}
				}
			}
		}
		82 = {
			if = {
				limit = {
					is_capital = yes
					isValidProv = yes
				}
				owner = {
					83 = {
						add_trade_modifier = {
							who = PREV
							duration = 2
							power = 1
							key = trade_capital
						}
					}
				}
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0015
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		TN_DoTrade = yes
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0016
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		regiongroup = {
            region = {
                limit = {
                    has_province_flag = TN_SectorCent
                }
                # Edit for new produce
                TN_SetPrcFill = { prod = 1 }
                TN_SetPrcFill = { prod = 2 }
                TN_SetPrcFill = { prod = 4 }
                TN_SetPrcFill = { prod = 5 }
                TN_SetPrcFill = { prod = 6 }
                TN_SetPrcFill = { prod = 9 }
                TN_SetPrcFill = { prod = 10 }
                TN_SetPrcFill = { prod = 21 }
                TN_SetPrcFill = { prod = 22 }
                TN_SetPrcFill = { prod = 23 }
                TN_SetPrcFill = { prod = 24 }
                TN_SetPrcFill = { prod = 25 }
                TN_SetPrcFill = { prod = 41 }

                # Edit for new produce
				TN_DoTradeAfterHelper4 = { type=Dmnd moneyVar=Spend prod=1 }
				TN_DoTradeAfterHelper4 = { type=Dmnd moneyVar=Spend prod=2 }
				TN_DoTradeAfterHelper4 = { type=Dmnd moneyVar=Spend prod=4 }
				TN_DoTradeAfterHelper4 = { type=Dmnd moneyVar=Spend prod=5 }
				TN_DoTradeAfterHelper4 = { type=Dmnd moneyVar=Spend prod=6 }
				TN_DoTradeAfterHelper4 = { type=Dmnd moneyVar=Spend prod=9 }
				TN_DoTradeAfterHelper4 = { type=Dmnd moneyVar=Spend prod=10 }
				TN_DoTradeAfterHelper4 = { type=Dmnd moneyVar=Spend prod=21 }
				TN_DoTradeAfterHelper4 = { type=Dmnd moneyVar=Spend prod=22 }
				TN_DoTradeAfterHelper4 = { type=Dmnd moneyVar=Spend prod=23 }
				TN_DoTradeAfterHelper4 = { type=Dmnd moneyVar=Spend prod=24 }
				TN_DoTradeAfterHelper4 = { type=Dmnd moneyVar=Spend prod=25 }
				TN_DoTradeAfterHelper4 = { type=Dmnd moneyVar=Spend prod=41 }

                # Edit for new produce
				TN_DoTradeAfterHelper4 = { type=Sply moneyVar=Earn prod=1 subsistence=no }
				TN_DoTradeAfterHelper4 = { type=Sply moneyVar=Earn prod=2 subsistence=no }
				TN_DoTradeAfterHelper4 = { type=Sply moneyVar=Earn prod=4 subsistence=no }
				TN_DoTradeAfterHelper4 = { type=Sply moneyVar=Earn prod=5 subsistence=no }
				TN_DoTradeAfterHelper4 = { type=Sply moneyVar=Earn prod=6 subsistence=no }
				TN_DoTradeAfterHelper4 = { type=Sply moneyVar=Earn prod=9 subsistence=no }
				TN_DoTradeAfterHelper4 = { type=Sply moneyVar=Earn prod=10 subsistence=no }
				TN_DoTradeAfterHelper4 = { type=Sply moneyVar=Earn prod=21 subsistence=no }
				TN_DoTradeAfterHelper4 = { type=Sply moneyVar=Earn prod=22 subsistence=no }
				TN_DoTradeAfterHelper4 = { type=Sply moneyVar=Earn prod=23 subsistence=no }
				TN_DoTradeAfterHelper4 = { type=Sply moneyVar=Earn prod=24 subsistence=no }
				TN_DoTradeAfterHelper4 = { type=Sply moneyVar=Earn prod=25 subsistence=no }
				TN_DoTradeAfterHelper4 = { type=Sply moneyVar=Earn prod=41 subsistence=no }

				# Edit for new produce
				TN_DoTradeAfterHelper4 = { type=SubsistSply moneyVar=SubsistEarn prod=1 subsistence=yes }
				TN_DoTradeAfterHelper4 = { type=SubsistSply moneyVar=SubsistEarn prod=2 subsistence=yes }
				TN_DoTradeAfterHelper4 = { type=SubsistSply moneyVar=SubsistEarn prod=4 subsistence=yes }
				TN_DoTradeAfterHelper4 = { type=SubsistSply moneyVar=SubsistEarn prod=5 subsistence=yes }
				TN_DoTradeAfterHelper4 = { type=SubsistSply moneyVar=SubsistEarn prod=6 subsistence=yes }
				TN_DoTradeAfterHelper4 = { type=SubsistSply moneyVar=SubsistEarn prod=9 subsistence=yes }
				TN_DoTradeAfterHelper4 = { type=SubsistSply moneyVar=SubsistEarn prod=10 subsistence=yes }
				TN_DoTradeAfterHelper4 = { type=SubsistSply moneyVar=SubsistEarn prod=21 subsistence=yes }
				TN_DoTradeAfterHelper4 = { type=SubsistSply moneyVar=SubsistEarn prod=22 subsistence=yes }
				TN_DoTradeAfterHelper4 = { type=SubsistSply moneyVar=SubsistEarn prod=23 subsistence=yes }
				TN_DoTradeAfterHelper4 = { type=SubsistSply moneyVar=SubsistEarn prod=24 subsistence=yes }
				TN_DoTradeAfterHelper4 = { type=SubsistSply moneyVar=SubsistEarn prod=25 subsistence=yes }
				TN_DoTradeAfterHelper4 = { type=SubsistSply moneyVar=SubsistEarn prod=41 subsistence=yes }
				
				if = {
					limit = {
						OR = {
							owner = { ai = no }
							has_global_flag = AI_Trade_Display
						}											
					}
					superTradeDisplay = yes
				}
				every_trade_node_member_province = {
					if = {
						limit = {
							has_province_flag = TN_SectorPart

							owned_by = PREV
							NOT = {
								province_id = PREV
							}
						}
						if = { 
							limit = {
								has_province_flag = TN_SectorCentDisplay
								OR = {
									owner = { ai = no }
									has_global_flag = AI_Trade_Display
								}									
							}
							mapKeysFromPrev = yes							
						}
						set_key = { lhs = TN_SectorEarn1 which = PREV }
						set_key = { lhs = TN_SectorEarn2 which = PREV }
						set_key = { lhs = TN_SectorEarn4 which = PREV }
						set_key = { lhs = TN_SectorEarn5 which = PREV }
						set_key = { lhs = TN_SectorEarn6 which = PREV }
						set_key = { lhs = TN_SectorEarn9 which = PREV }
						set_key = { lhs = TN_SectorEarn10 which = PREV }
						set_key = { lhs = TN_SectorEarn21 which = PREV }
						set_key = { lhs = TN_SectorEarn22 which = PREV }
						set_key = { lhs = TN_SectorEarn23 which = PREV }
						set_key = { lhs = TN_SectorEarn24 which = PREV }
						set_key = { lhs = TN_SectorEarn25 which = PREV }
						set_key = { lhs = TN_SectorEarn41 which = PREV }

						set_key = { lhs = TN_SectorSubsistEarn1 which = PREV }
						set_key = { lhs = TN_SectorSubsistEarn2 which = PREV }
						set_key = { lhs = TN_SectorSubsistEarn4 which = PREV }
						set_key = { lhs = TN_SectorSubsistEarn5 which = PREV }
						set_key = { lhs = TN_SectorSubsistEarn6 which = PREV }
						set_key = { lhs = TN_SectorSubsistEarn9 which = PREV }
						set_key = { lhs = TN_SectorSubsistEarn10 which = PREV }
						set_key = { lhs = TN_SectorSubsistEarn21 which = PREV }
						set_key = { lhs = TN_SectorSubsistEarn22 which = PREV }
						set_key = { lhs = TN_SectorSubsistEarn23 which = PREV }
						set_key = { lhs = TN_SectorSubsistEarn24 which = PREV }
						set_key = { lhs = TN_SectorSubsistEarn25 which = PREV }
						set_key = { lhs = TN_SectorSubsistEarn41 which = PREV }

						set_key = { lhs = TN_SectorSpend1 which = PREV }
						set_key = { lhs = TN_SectorSpend2 which = PREV }
						set_key = { lhs = TN_SectorSpend4 which = PREV }
						set_key = { lhs = TN_SectorSpend5 which = PREV }
						set_key = { lhs = TN_SectorSpend6 which = PREV }
						set_key = { lhs = TN_SectorSpend9 which = PREV }
						set_key = { lhs = TN_SectorSpend10 which = PREV }
						set_key = { lhs = TN_SectorSpend21 which = PREV }
						set_key = { lhs = TN_SectorSpend22 which = PREV }
						set_key = { lhs = TN_SectorSpend23 which = PREV }
						set_key = { lhs = TN_SectorSpend24 which = PREV }
						set_key = { lhs = TN_SectorSpend25 which = PREV }
						set_key = { lhs = TN_SectorSpend41 which = PREV }
					}
				}
				every_trade_node_member_province = {
					if = {
						limit = {
							has_province_flag = TN_SectorPart

							owned_by = PREV
						}
						# Edit for new produce
						TN_DoTradeAfter = { prod = 1 type = Life }
						TN_DoTradeAfter = { prod = 2 type = Life }
						TN_DoTradeAfter = { prod = 4 type = Life }
						TN_DoTradeAfter = { prod = 5 type = Life }
						TN_DoTradeAfter = { prod = 6 }
						TN_DoTradeAfter = { prod = 9 type = Luxury }
						TN_DoTradeAfter = { prod = 10 type = Luxury }
						TN_DoTradeAfter = { prod = 21 type = Comfort }
						TN_DoTradeAfter = { prod = 22 }
						TN_DoTradeAfter = { prod = 23 type = Comfort }
						TN_DoTradeAfter = { prod = 24 }
						TN_DoTradeAfter = { prod = 25 type = Luxury }
						TN_DoTradeAfter = { prod = 41 type = Knowledge }

						TN_DoDole = { class = SF }
						TN_DoDole = { class = NM }
						TN_DoDole = { class = RE }
						TN_DoDole = { class = NO }
						TN_DoDole = { class = BG }
						TN_DoDole = { class = CL }
					}
				} 				
        	}
        }
		
		TN_SpreadStockpile = yes
		TN_SetTradeIncome = yes
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0017
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		every_country = {
			limit = {
				isValidCountry = yes
			}
			set_key = { lhs = Infra_StateSpend value = 0 }
		}

		regiongroup = {
			region = {
				limit = {
					isValidProv = yes
				}
				Infra_SetBuildingMax = yes
				Infra_CheckClass = { class=SF }
				Infra_CheckClass = { class=NM }
				Infra_CheckClass = { class=RE }
				Infra_CheckClass = { class=NO }
				Infra_CheckClass = { class=BG }
				Infra_CheckClass = { class=CL }
				Infra_CheckBU = yes
				
				set_key = { lhs = SF_IncomePrp value = 0 }
				set_key = { lhs = NM_IncomePrp value = 0 }
				set_key = { lhs = RE_IncomePrp value = 0 }
				set_key = { lhs = NO_IncomePrp value = 0 }
				set_key = { lhs = BG_IncomePrp value = 0 }
				set_key = { lhs = CL_IncomePrp value = 0 }
				set_key = { lhs = BU_IncomePrp value = 0 }

				set_key = { lhs = Building_AgricultureIncome value = 0 }
				set_key = { lhs = Building_ForestryIncome value = 0 }
				set_key = { lhs = Building_ExtractionIncome value = 0 }
				set_key = { lhs = Building_FisheryIncome value = 0 }
				set_key = { lhs = Building_CommercialIncome value = 0 }
				set_key = { lhs = Building_IndustrialIncome value = 0 }
				set_key = { lhs = Building_AcademicIncome value = 0 }
				
				set_key = { lhs = Building_AgricultureLoss value = 0 }
				set_key = { lhs = Building_ForestryLoss value = 0 }
				set_key = { lhs = Building_ExtractionLoss value = 0 }
				set_key = { lhs = Building_FisheryLoss value = 0 }
				set_key = { lhs = Building_CommercialLoss value = 0 }
				set_key = { lhs = Building_IndustrialLoss value = 0 }
				set_key = { lhs = Building_AcademicLoss value = 0 }

				Prod_SetBuildingIncome = { slot = 0 }
				Prod_SetBuildingIncome = { slot = 1 }
				Prod_SetBuildingIncome = { slot = 2 }
				Prod_SetBuildingIncome = { slot = 3 }
				Prod_SetBuildingIncome = { slot = 4 }
				Prod_SetBuildingIncome = { slot = 5 }
				Prod_SetBuildingIncome = { slot = 6 }
				Prod_SetBuildingIncome = { slot = 7 }
				Prod_SetBuildingIncome = { slot = 8 }
				Prod_SetBuildingIncome = { slot = 9 }
				Prod_SetBuildingIncome = { slot = 10 }
				Prod_SetBuildingIncome = { slot = 11 }
				Prod_SetBuildingIncome = { slot = 12 }
				Prod_SetBuildingIncome = { slot = 13 }
				Prod_SetBuildingIncome = { slot = 14 }
				Prod_SetBuildingIncome = { slot = 15 }
				
				multiply_key = { lhs = Building_AgricultureIncomeAverage value = 0.9 }
				multiply_key = { lhs = Building_ForestryIncomeAverage value = 0.9 }
				multiply_key = { lhs = Building_ExtractionIncomeAverage value = 0.9 }
				multiply_key = { lhs = Building_FisheryIncomeAverage value = 0.9 }
				multiply_key = { lhs = Building_CommercialIncomeAverage value = 0.9 }
				multiply_key = { lhs = Building_IndustrialIncomeAverage value = 0.9 }
				multiply_key = { lhs = Building_AcademicIncomeAverage value = 0.9 }
				
				change_key = { lhs = Building_AgricultureIncomeAverage which = Building_AgricultureIncome }
				change_key = { lhs = Building_ForestryIncomeAverage which = Building_ForestryIncome }
				change_key = { lhs = Building_ExtractionIncomeAverage which = Building_ExtractionIncome }
				change_key = { lhs = Building_FisheryIncomeAverage which = Building_FisheryIncome }
				change_key = { lhs = Building_CommercialIncomeAverage which = Building_CommercialIncome }
				change_key = { lhs = Building_IndustrialIncomeAverage which = Building_IndustrialIncome }
				change_key = { lhs = Building_AcademicIncomeAverage which = Building_AcademicIncome }

				Prod_SetPrpIncome = { type = Agriculture }
				Prod_SetPrpIncome = { type = Forestry }
				Prod_SetPrpIncome = { type = Extraction }
				Prod_SetPrpIncome = { type = Fishery }
				Prod_SetPrpIncome = { type = Commercial }
				Prod_SetPrpIncome = { type = Industrial }
				Prod_SetPrpIncome = { type = Academic }
				
				set_key = { lhs = Building_ResourcesSpend value = 0 }
				set_key = { lhs = Building_BuildingSpend value = 0 }
				set_key = { lhs = Building_ProjectSpend value = 0 }

				Infra_SumSpend = { type = Agriculture }
				Infra_SumSpend = { type = Forestry }
				Infra_SumSpend = { type = Extraction }
				Infra_SumSpend = { type = Fishery }
				Infra_SumSpend = { type = Commercial }
				Infra_SumSpend = { type = Industrial }
				Infra_SumSpend = { type = Academic }
				
				Infra_DoSize = { type = Agriculture cap = Building_AgricultureMax factor = 2 excl = 8 }
				Infra_DoSize = { type = Forestry cap = Building_ForestryMax factor = 2 }
				Infra_DoSize = { type = Extraction cap = Building_ExtractionMax factor = 2 }
				Infra_DoSize = { type = Fishery cap = Building_FisheryMax factor = 2 }
				Infra_DoSize = { type = Commercial factor = 0.5 }
				Infra_DoSize = { type = Industrial factor = 2 excl_cottage = 38 }
				Infra_DoSize = { type = Academic factor = 1 excl_relig = 29  }

				set_key = { lhs = Infra_Income value = 0 }
				set_key = { lhs = SF_SpendPrp value = 0 }
				set_key = { lhs = RE_SpendPrp value = 0 }
				set_key = { lhs = NM_SpendPrp value = 0 }
				set_key = { lhs = NO_SpendPrp value = 0 }
				set_key = { lhs = BG_SpendPrp value = 0 }
				set_key = { lhs = CL_SpendPrp value = 0 }
				set_key = { lhs = BU_SpendPrp value = 0 }
				
				set_key = { lhs = SF_SpendInfra value = 0 }
				set_key = { lhs = RE_SpendInfra value = 0 }
				set_key = { lhs = NM_SpendInfra value = 0 }
				set_key = { lhs = NO_SpendInfra value = 0 }
				set_key = { lhs = BG_SpendInfra value = 0 }
				set_key = { lhs = CL_SpendInfra value = 0 }
				set_key = { lhs = BU_SpendInfra value = 0 }
				
				Infra_DoDecay = { type = Agriculture }
				Infra_DoDecay = { type = Forestry }
				Infra_DoDecay = { type = Extraction }
				Infra_DoDecay = { type = Fishery }
				Infra_DoDecay = { type = Commercial }
				Infra_DoDecay = { type = Industrial }
				Infra_DoDecay = { type = Academic }
				
				Infra_DoSpend = { type = Agriculture BU = 0.05 Mine=no }
				Infra_DoSpend = { type = Forestry BU = 0.25 Mine=no }
				Infra_DoSpend = { type = Extraction BU = 0.4 Mine=yes }
				Infra_DoSpend = { type = Fishery BU = 0.05 Mine=no }
				Infra_DoSpend = { type = Commercial BU = 0 Mine=no }
				Infra_DoSpend = { type = Industrial BU = 0.03 Mine=no }
				Infra_DoSpend = { type = Academic BU = 0.05 Mine=no Uni=yes }
				set_key = { lhs = Ai_Prp_Maint value = 0 }
				
				
				Infra_DoShare = { type = Agriculture }
				Infra_DoShare = { type = Forestry }
				Infra_DoShare = { type = Extraction }
				Infra_DoShare = { type = Fishery }
				Infra_DoShare = { type = Commercial }
				Infra_DoShare = { type = Industrial }
				Infra_DoShare = { type = Academic }

				Infra_DoIncomeInfra = { class = NO div = 50 }
				Infra_DoIncomeInfra = { class = BG div = 43 }
				Infra_DoIncomeInfra = { class = CL div = 43 }

				set_key = { lhs = Infra_StateSpend value = 0 }

				Infra_SetCostPerUnit = { type = Pathing prod1 = 6 prod2 = 24 labor = R }
				Infra_SetCostPerUnit = { type = Harbourage prod1 = 23 prod2 = 24 labor = UL }
				Infra_SetCostPerUnit = { type = Amenities prod1 = 24 prod2 = 41 labor = UL }
				Infra_SetCostPerUnit = { type = Irrigation prod1 = 6 labor = R }
				Infra_SetCostPerUnit = { type = Capitol prod1 = 24 prod2 = 41 labor = UL }
				Infra_SetCostPerUnit = { type = Courthouse prod1 = 24 prod2 = 41 labor = UL }
				Infra_SetCostPerUnit = { type = Garrison prod1 = 22 prod2 = 24 labor = R }

				Infra_SetSpendInfra = { type = Pathing prod1 = 6 prod2 = 24 labor = R StateBased=no }
				Infra_SetSpendInfra = { type = Harbourage prod1 = 23 prod2 = 24 labor = UL StateBased=no }
				Infra_SetSpendInfra = { type = Amenities prod1 = 24 prod2 = 41 labor = UL StateBased=no }
				Infra_SetSpendInfra = { type = Irrigation prod1 = 6 labor = R StateBased=no }
				Infra_SetSpendInfra = { type = Capitol prod1 = 24 prod2 = 41 labor = UL StateBased=yes }
				Infra_SetSpendInfra = { type = Courthouse prod1 = 24 prod2 = 41 labor = UL StateBased=yes }
				Infra_SetSpendInfra = { type = Garrison prod1 = 22 prod2 = 24 labor = R StateBased=no }

				if = {
					limit = {
						isValidProv = yes
					}
					owner = {
						change_key = { lhs = Infra_StateSpend which = PREV }
					}
				}

				set_key = { lhs = Infra_Spend which = Infra_PathingSpend }
				change_key = { lhs = Infra_Spend which = Infra_HarbourageSpend }
				change_key = { lhs = Infra_Spend which = Infra_AmenitiesSpend }
				change_key = { lhs = Infra_Spend which = Infra_IrrigationSpend }
				change_key = { lhs = Infra_Spend which = Infra_CapitolSpend }
				change_key = { lhs = Infra_Spend which = Infra_CourthouseSpend }
				change_key = { lhs = Infra_Spend which = Infra_GarrisonSpend }

				if = {
					limit = {
						NOT = {
							has_global_flag = POP_Sim4
						}
					}
					if = {
						limit = {
							check_key = { lhs = Infra_PathingNomad value = 1 }
						}
						set_province_flag = Infra_Update
						
						set_key = { lhs = Infra_Pathing which = Infra_PathingNomad }
						subtract_key = { lhs = Infra_Pathing value = 3 }
						set_key = { lhs = Infra_PathingNomad value = 0 }
						if = {
							limit = {
								NOT = { check_key = { lhs = Infra_Pathing value = 0 } }
							}
							set_key = { lhs = Infra_Pathing value = 0 }
						}
					}
					if = {
						limit = {
							check_key = { lhs = Infra_PathingSilk value = 1 }
						}
						set_province_flag = Infra_Update
						
						set_key = { lhs = Infra_Pathing which = Infra_PathingSilk }
						subtract_key = { lhs = Infra_Pathing value = 1 }
						set_key = { lhs = Infra_PathingSilk value = 0 }
						if = {
							limit = {
								NOT = { check_key = { lhs = Infra_Pathing value = 0 } }
							}
							set_key = { lhs = Infra_Pathing value = 0 }
						}
					}
					
					Infra_CheckInfra = { type = Pathing prod1 = 6 prod2 = 24 labor = R num = 3 StateBased=no }
					Infra_CheckInfra = { type = Harbourage prod1 = 23 prod2 = 24 labor = UL num = 3 StateBased=no }
					Infra_CheckInfra = { type = Amenities prod1 = 24 prod2 = 41 labor = UL num = 3 StateBased=no }
					Infra_CheckInfra = { type = Irrigation prod1 = 6 labor = R num = 2 StateBased=no }
					Infra_CheckInfra = { type = Garrison prod1 = 22 prod2 = 24 labor = R num = 3 StateBased=no }
					Infra_CheckInfra = { type = Courthouse prod1 = 24 prod2 = 41 labor = UL num = 3 StateBased=yes }
					Infra_CheckInfra = { type = Capitol prod1 = 24 prod2 = 41 labor = UL num = 3 StateBased=yes }
					if = {
						limit = {
							owner = {
								has_country_flag = Modi_NomadCE
							}
							
							OR = {
								province_group = steppes_group
								province_group = arabian_steppes_group
								province_group = saharan_steppes_group
							}
						}
						set_key = { lhs = Infra_PathingNomad which = Infra_Pathing }
						change_key = { lhs = Infra_PathingNomad value = 3 }
						
						if = {
							limit = {
								NOT = {
									check_key = { lhs = Infra_Pathing value = 5 }
								}
							}
							change_key = { lhs = Infra_Pathing value = 3 }
						}
						else = {
							set_key = { lhs = Infra_Pathing value = 7 }
						}
					}
					if = {
						limit = {
							has_province_flag = TN_Silk
							NOT = { check_key = { lhs = Infra_PathingNomad value = 1 } }
						}
						set_key = { lhs = Infra_PathingSilk which = Infra_Pathing }
						change_key = { lhs = Infra_PathingSilk value = 1 }
						
						if = {
							limit = {
								NOT = {
									check_key = { lhs = Infra_Pathing value = 7 }
								}
							}
							change_key = { lhs = Infra_Pathing value = 1 }
						}
						else = {
							set_key = { lhs = Infra_Pathing value = 7 }
						}
					}
				}
				
				set_key = { lhs = Building_ResourcesIncome which = Building_AgricultureIncome }
				change_key = { lhs = Building_ResourcesIncome which = Building_ForestryIncome }
				change_key = { lhs = Building_ResourcesIncome which = Building_ExtractionIncome }
				change_key = { lhs = Building_ResourcesIncome which = Building_FisheryIncome }
				set_key = { lhs = Building_BuildingIncome which = Building_CommercialIncome }
				change_key = { lhs = Building_BuildingIncome which = Building_IndustrialIncome }
				change_key = { lhs = Building_BuildingIncome which = Building_AcademicIncome }

				set_key = { lhs = Building_ResourcesSpend which = Building_AgricultureSpend }
				change_key = { lhs = Building_ResourcesSpend which = Building_ForestrySpend }
				change_key = { lhs = Building_ResourcesSpend which = Building_ExtractionSpend }
				change_key = { lhs = Building_ResourcesSpend which = Building_FisherySpend }
				set_key = { lhs = Building_BuildingSpend which = Building_CommercialSpend }
				change_key = { lhs = Building_BuildingSpend which = Building_IndustrialSpend }
				change_key = { lhs = Building_BuildingSpend which = Building_AcademicSpend }
				
				Prod_SumIncomeSpending = { class = SF }
				Prod_SumIncomeSpending = { class = NM }
				Prod_SumIncomeSpending = { class = RE }
				Prod_SumIncomeSpending = { class = NO }
				Prod_SumIncomeSpending = { class = BG }
				Prod_SumIncomeSpending = { class = CL }
				Prod_SumIncomeSpending = { powerbroker = BU }

				Infra_SpendProject = { slot = 0 }
				Infra_SpendProject = { slot = 1 }
				Infra_SpendProject = { slot = 2 }
				Infra_SpendProject = { slot = 3 }
				Infra_SpendProject = { slot = 4 }
				Infra_SpendProject = { slot = 5 }
				Infra_SpendProject = { slot = 6 }
				Infra_SpendProject = { slot = 7 }
				Infra_SpendProject = { slot = 8 }
				Infra_SpendProject = { slot = 9 }

				Infra_CheckProject = { slot = 0 }
				Infra_CheckProject = { slot = 1 }
				Infra_CheckProject = { slot = 2 }
				Infra_CheckProject = { slot = 3 }
				Infra_CheckProject = { slot = 4 }
				Infra_CheckProject = { slot = 5 }
				Infra_CheckProject = { slot = 6 }
				Infra_CheckProject = { slot = 7 }
				Infra_CheckProject = { slot = 8 }
				Infra_CheckProject = { slot = 9 }

				set_key = { lhs = Building_Resources which = Building_Agriculture }
				change_key = { lhs = Building_Resources which = Building_Forestry }
				change_key = { lhs = Building_Resources which = Building_Extraction }
				change_key = { lhs = Building_Resources which = Building_Fishery }

				set_key = { lhs = Building_ResourcesMax value = 0 }
				if = {
					limit = {
						check_key = { lhs = Building_Agriculture value = 0.001 }
					}
					change_key = { lhs = Building_ResourcesMax which = Building_AgricultureMax }
				}
				if = {
					limit = {
						check_key = { lhs = Building_Forestry value = 0.001 }
					}
					change_key = { lhs = Building_ResourcesMax which = Building_ForestryMax }
				}
				if = {
					limit = {
						check_key = { lhs = Building_Extraction value = 0.001 }
					}
					change_key = { lhs = Building_ResourcesMax which = Building_ExtractionMax }
				}
				if = {
					limit = {
						check_key = { lhs = Building_Fishery value = 0.001 }
					}
					change_key = { lhs = Building_ResourcesMax which = Building_FisheryMax }
				}
				Infra_UpdatePerc = { type = Resources }
				
				Prp_SetPrpSumR = yes
				Prp_SetPrpSumB = yes
				
				Prp_SetPrpShare = { type=Agriculture }
				Prp_SetPrpShare = { type=Forestry }
				Prp_SetPrpShare = { type=Extraction }
				Prp_SetPrpShare = { type=Fishery }
				Prp_SetPrpShare = { type=Commercial }
				Prp_SetPrpShare = { type=Industrial }
				Prp_SetPrpShare = { type=Academic }

				if = {
					limit = {
						check_key = { lhs = Building_Resources value = 0.001 }
					}
					set_key = { lhs = SF_PrpResources which = SF_Resources }
					divide_key = { lhs = SF_PrpResources which = Building_Resources }
					multiply_key = { lhs = SF_PrpResources value = 100 }

					set_key = { lhs = NM_PrpResources which = NM_Resources }
					divide_key = { lhs = NM_PrpResources which = Building_Resources }
					multiply_key = { lhs = NM_PrpResources value = 100 }

					set_key = { lhs = RE_PrpResources which = RE_Resources }
					divide_key = { lhs = RE_PrpResources which = Building_Resources }
					multiply_key = { lhs = RE_PrpResources value = 100 }

					set_key = { lhs = NO_PrpResources which = NO_Resources }
					divide_key = { lhs = NO_PrpResources which = Building_Resources }
					multiply_key = { lhs = NO_PrpResources value = 100 }

					set_key = { lhs = BG_PrpResources which = BG_Resources }
					divide_key = { lhs = BG_PrpResources which = Building_Resources }
					multiply_key = { lhs = BG_PrpResources value = 100 }

					set_key = { lhs = CL_PrpResources which = CL_Resources }
					divide_key = { lhs = CL_PrpResources which = Building_Resources }
					multiply_key = { lhs = CL_PrpResources value = 100 }

					set_key = { lhs = BU_PrpResources which = BU_Resources }
					divide_key = { lhs = BU_PrpResources which = Building_Resources }
					multiply_key = { lhs = BU_PrpResources value = 100 }
				}
				else = {
					set_key = { lhs = NO_PrpResources value = 50 }
					set_key = { lhs = BG_PrpResources value = 0 }
					set_key = { lhs = CL_PrpResources value = 30 }
					set_key = { lhs = SF_PrpResources value = 20 }
					set_key = { lhs = NM_PrpResources value = 0 }
					set_key = { lhs = RE_PrpResources value = 0 }
					set_key = { lhs = BU_PrpResources value = 0 }
				}

				set_key = { lhs = Building_Building which = Building_Commercial }
				change_key = { lhs = Building_Building which = Building_Industrial }
				change_key = { lhs = Building_Building which = Building_Academic }

				if = {
					limit = {
						check_key = { lhs = Building_Building value = 0.001 }
					}
					set_key = { lhs = SF_PrpBuilding which = SF_Building }
					divide_key = { lhs = SF_PrpBuilding which = Building_Building }
					multiply_key = { lhs = SF_PrpBuilding value = 100 }

					set_key = { lhs = NM_PrpBuilding which = NM_Building }
					divide_key = { lhs = NM_PrpBuilding which = Building_Building }
					multiply_key = { lhs = NM_PrpBuilding value = 100 }

					set_key = { lhs = RE_PrpBuilding which = RE_Building }
					divide_key = { lhs = RE_PrpBuilding which = Building_Building }
					multiply_key = { lhs = RE_PrpBuilding value = 100 }

					set_key = { lhs = NO_PrpBuilding which = NO_Building }
					divide_key = { lhs = NO_PrpBuilding which = Building_Building }
					multiply_key = { lhs = NO_PrpBuilding value = 100 }

					set_key = { lhs = BG_PrpBuilding which = BG_Building }
					divide_key = { lhs = BG_PrpBuilding which = Building_Building }
					multiply_key = { lhs = BG_PrpBuilding value = 100 }

					set_key = { lhs = CL_PrpBuilding which = CL_Building }
					divide_key = { lhs = CL_PrpBuilding which = Building_Building }
					multiply_key = { lhs = CL_PrpBuilding value = 100 }

					set_key = { lhs = BU_PrpBuilding which = BU_Building }
					divide_key = { lhs = BU_PrpBuilding which = Building_Building }
					multiply_key = { lhs = BU_PrpBuilding value = 100 }
				}
				else = {
					set_key = { lhs = NO_PrpBuilding value = 0 }
					set_key = { lhs = BG_PrpBuilding value = 50 }
					set_key = { lhs = CL_PrpBuilding value = 30 }
					set_key = { lhs = SF_PrpBuilding value = 0 }
					set_key = { lhs = NM_PrpBuilding value = 0 }
					set_key = { lhs = RE_PrpBuilding value = 20 }
					set_key = { lhs = BU_PrpBuilding value = 0 }
				}
				
				if = {
					limit = {
						check_key = { lhs = Building_Resources value = 0.001 }
					}
					set_key = { lhs = Tmp_0 which = Building_AgricultureIncomeAverage }
					change_key = { lhs = Tmp_0 which = Building_ForestryIncomeAverage }
					change_key = { lhs = Tmp_0 which = Building_ExtractionIncomeAverage }
					change_key = { lhs = Tmp_0 which = Building_FisheryIncomeAverage }
					divide_key = { lhs = Tmp_0 which = Building_Resources }
					
					set_key = { lhs = SF_WealthResources which = SF_Resources }
					set_key = { lhs = NM_WealthResources which = NM_Resources }
					set_key = { lhs = RE_WealthResources which = RE_Resources }
					set_key = { lhs = NO_WealthResources which = NO_Resources }
					set_key = { lhs = BG_WealthResources which = BG_Resources }
					set_key = { lhs = CL_WealthResources which = CL_Resources }
					
					multiply_key = { lhs = SF_WealthResources which = Tmp_0 }
					multiply_key = { lhs = NM_WealthResources which = Tmp_0 }
					multiply_key = { lhs = RE_WealthResources which = Tmp_0 }
					multiply_key = { lhs = NO_WealthResources which = Tmp_0 }
					multiply_key = { lhs = BG_WealthResources which = Tmp_0 }
					multiply_key = { lhs = CL_WealthResources which = Tmp_0 }
				}
				else = {
					set_key = { lhs = SF_WealthResources value = 0 }
					set_key = { lhs = NM_WealthResources value = 0 }
					set_key = { lhs = RE_WealthResources value = 0 }
					set_key = { lhs = NO_WealthResources value = 0 }
					set_key = { lhs = BG_WealthResources value = 0 }
					set_key = { lhs = CL_WealthResources value = 0 }
				}
				
				if = {
					limit = {
						check_key = { lhs = Building_Building value = 0.001 }
					}
					set_key = { lhs = Tmp_0 which = Building_CommercialIncomeAverage }
					change_key = { lhs = Tmp_0 which = Building_IndustrialIncomeAverage }
					change_key = { lhs = Tmp_0 which = Building_AcademicIncomeAverage }
					divide_key = { lhs = Tmp_0 which = Building_Building }
					
					set_key = { lhs = SF_WealthBuilding which = SF_Building }
					set_key = { lhs = NM_WealthBuilding which = NM_Building }
					set_key = { lhs = RE_WealthBuilding which = RE_Building }
					set_key = { lhs = NO_WealthBuilding which = NO_Building }
					set_key = { lhs = BG_WealthBuilding which = BG_Building }
					set_key = { lhs = CL_WealthBuilding which = CL_Building }
					
					multiply_key = { lhs = SF_WealthBuilding which = Tmp_0 }
					multiply_key = { lhs = NM_WealthBuilding which = Tmp_0 }
					multiply_key = { lhs = RE_WealthBuilding which = Tmp_0 }
					multiply_key = { lhs = NO_WealthBuilding which = Tmp_0 }
					multiply_key = { lhs = BG_WealthBuilding which = Tmp_0 }
					multiply_key = { lhs = CL_WealthBuilding which = Tmp_0 }
				}
				else = {
					set_key = { lhs = SF_WealthBuilding value = 0 }
					set_key = { lhs = NM_WealthBuilding value = 0 }
					set_key = { lhs = RE_WealthBuilding value = 0 }
					set_key = { lhs = NO_WealthBuilding value = 0 }
					set_key = { lhs = BG_WealthBuilding value = 0 }
					set_key = { lhs = CL_WealthBuilding value = 0 }
				}

				set_key = { lhs = Tmp_0 value = 0 }
				set_key = { lhs = Tmp_1 value = 0 }
				set_key = { lhs = Tmp_2 value = 0 }
				set_key = { lhs = Tmp_3 value = 0 }
				set_key = { lhs = Tmp_4 value = 0 }
				set_key = { lhs = Tmp_5 value = 0 }
				set_key = { lhs = Tmp_6 value = 0 }
				set_key = { lhs = Tmp_8 value = 0 }
				set_key = { lhs = Tmp_9 value = 0 }
	
				set_key = { lhs = Building_Total value = 0 }
				change_key = { lhs = Building_Total which = Building_Resources }
				change_key = { lhs = Building_Total which = Building_Building }
				
				# Sums of income
				Prp_SetPrpGross = yes
				Infra_RefreshModifier = yes
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0018
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0019
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
        regiongroup = {
            region = {
                limit = {
                    isValidProv = yes
                }
                TN_DoIncomeSpending = yes
            }
        }
        regiongroup = {
            region = {
                limit = {
                    isValidEmpty = yes
					NOT = { has_global_flag = POP_Sim }
                }
                
                random_list = {
                    6 = {
                    }
                    2 = {
                        Immunity_Calc = { Type=0 }
                        Immunity_Calc = { Type=1 }
                        Immunity_Calc = { Type=2 }
                        Immunity_Calc = { Type=3 }
                        Immunity_Calc = { Type=4 }
                    }
                }
            }
        }

        regiongroup = {
            region = {
                limit = {
                    isValidProv = yes
                }
                TN_SetIncome = yes

                set_key = { lhs = Tmp_0 value = 0 }
                set_key = { lhs = Tmp_1 value = 0 }
                set_key = { lhs = Tmp_2 value = 0 }
                set_key = { lhs = Tmp_3 value = 0 }
            }
        }
    }
    
    option = {
        name = no_localisation
    }
}

country_event = {
    id = POP_Census.002
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
        Modi_Main = yes
    }

    option = {
		name = no_localisation
    }
}
country_event = {
    id = POP_Census.003
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		every_province = {
			limit = {
				isValidProv = yes
			}
			# General Timer
			change_key = { lhs = YearsOfRule value = 1 }
			
			# 5 Year Timer
			change_key = { lhs = YearTimer5 value = 1 }
			if = {
				limit = {
					check_key = { lhs = YearTimer5 value = 5 }
				}
				set_key = { lhs = YearTimer5 value = 0 }
			}
			
			# 10 Year Timer
			change_key = { lhs = YearTimer10 value = 1 }
			if = {
				limit = {
					check_key = { lhs = YearTimer10 value = 10 }
				}
				set_key = { lhs = YearTimer10 value = 0 }
			}
			
			# 25 Year Timer
			change_key = { lhs = YearTimer25 value = 1 }
			if = {
				limit = {
					check_key = { lhs = YearTimer25 value = 25 }
				}
				set_key = { lhs = YearTimer25 value = 0 }
				Rights_SyncTick = yes
			}
		}
    }

    option = {
		name = no_localisation
    }
}
country_event = {
    id = POP_Census.0021
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		every_country = {
			limit = {
				isValidCountry = yes
			}
			clr_country_flag = Teuton_Sponsor
			clr_country_flag = Knights_Sponsor
			
			#clr_country_flag = BAL_Coloniser
			#clr_country_flag = FEA_Coloniser
			#clr_country_flag = HOA_Coloniser
			#clr_country_flag = IND_Coloniser
			#clr_country_flag = SEA_Coloniser
			#clr_country_flag = LATIN_Coloniser
			#clr_country_flag = MEN_Coloniser
			#clr_country_flag = RUS_Coloniser
			#clr_country_flag = SWA_Coloniser
			#clr_country_flag = WAF_Coloniser
			
            clr_country_flag = has_too_much_money
			set_key = { lhs = Tax_Teuton value = 0 } 
			set_key = { lhs = Tax_Emperor value = 0 }
			set_key = { lhs = Tax_Knights value = 0 }

			## Pre tax
			Stat_Pre = yes
			Admin_Main = yes # tax efficency, bureaucracy
			Nat_SumStats = yes # sum up variables at national level
			
			
			subtract_key = { lhs = Building_ProjectWealth which = Building_ProjectSpend }
			
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Building_ProjectWealth value = 0 }
					}
				}
				multiply_key = { lhs = Building_ProjectWealth value = -1 }
				
				every_owned_province = {
					limit = {
						check_key = { lhs = Building_ProjectSpend value = 0.001 }
					}
					set_key = { lhs = Building_ProjectWealth which = PREV }
					
					multiply_key = { lhs = Building_ProjectSpend which = Building_ProjectWealth }
					divide_key = { lhs = Building_ProjectSpend which = PREV }
				}
				
				set_key = { lhs = Building_ProjectWealth value = 0 }
			}
			else = {
				every_owned_province = {
					limit = {
						check_key = { lhs = Building_ProjectSpend value = 0.001 }
					}
					set_key = { lhs = Building_ProjectSpend value = 0 }
				}
			}
            
            if = {
                limit = {
                    ai = no 
                    #always = yes
                }
                POP_Consumption = { prod = 1 }
                POP_Consumption = { prod = 2 }
                POP_Consumption = { prod = 4 }
                POP_Consumption = { prod = 5 }
                POP_Consumption = { prod = 9 }
                POP_Consumption = { prod = 10 }
                POP_Consumption = { prod = 21 }
                POP_Consumption = { prod = 23 }
                POP_Consumption = { prod = 25 }
                POP_Consumption = { prod = 41 }
            }
			export_ship_speed_multiplier_effect = { which = Tmp_0 }

			if = {
				limit = {
					NOT = {
						check_key = { lhs = pc_ss which = Tmp_0 }
					}
				}
				set_country_flag = tf_recalculate_communication_efficiency
			}

			set_key = { lhs = pc_ss which = Tmp_0 }

			set_key = { lhs = Tmp_0 value = 0 }
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0022
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
        every_province = {
			limit = {
				isValidProv = yes
			}
			Prov_Main = yes
        }
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0023
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

	immediate = {
        every_province = {
			limit = {
				isValidProv = yes
			}
			Stat_Set = yes
			Prov_DispProfit = yes
			Prod_Disp = yes
			if = {
				limit = {
					isValidProv = yes
				}
				if = {
					limit = {
						OR = {
							has_province_modifier = Teuton_Commandery_Low
							has_province_modifier = Teuton_Commandery_Med
							has_province_modifier = Teuton_Commandery_High
							has_province_modifier = Teuton_Commandery_Low_trade
							has_province_modifier = Teuton_Commandery_Med_trade
							has_province_modifier = Teuton_Commandery_High_trade
						}
					}
					owner = { set_country_flag = Teuton_Sponsor }
				}
				if = {
					limit = {
						OR = {
							has_province_modifier = Knights_Commandery_Low
							has_province_modifier = Knights_Commandery_Med
							has_province_modifier = Knights_Commandery_High
							has_province_modifier = Knights_Commandery_Low_trade
							has_province_modifier = Knights_Commandery_Med_trade
							has_province_modifier = Knights_Commandery_High_trade
						}
					}
					owner = { set_country_flag = Knights_Sponsor }
				}
			}
        }
	}

	option = {
		name = no_localisation
	}
}

country_event = {
    id = POP_Census.0024
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

	immediate = {
		every_country = {
			limit = {
				isValidCountry = yes
			}
			Ruler_Calc = yes
			Nat_Main = yes
			#Nat_StateCrpt = yes
			Stat_CountrySet = yes
			FC_Census = yes
			
			#Desire_DoGainAnnual = { type = NO }
			#Desire_DoGainAnnual = { type = BG }
			#Desire_DoGainAnnual = { type = CL }


			## Handle Yearly Manpower Loss/Gain
			MP_RaisedCalc = yes # get raised regiments
			export_to_key = {
				lhs = Tmp_0
				value = manpower
			}

			if = { # For humans add raised regiments to manpower
				limit = {
					ai = no
				}
				change_key = { lhs = Tmp_0 which = MP_RaisedReg }
			}
			
			export_to_key = {
                lhs = Tmp_1
                value = max_manpower
            }

			set_key = { lhs = Tmp_2 which = Tmp_0 } # Manpower (+ Raised Reg for humans)
			subtract_key = { lhs = Tmp_2 which = Tmp_1 } # Manpower - MaxManpower
			
			# If (Manpower + Raised Regiments) - Maxmanpower >= 0 --> Remove access manpower
			if = {
				limit = {
					check_key = { lhs = Tmp_2 value = 0.001 }
				}
				if = { limit = { check_key = { lhs = Tmp_2 value = 1048.576 } } subtract_key = { lhs = Tmp_2 value = 1048.576 } add_manpower = -1048.576 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 524.288 } } subtract_key = { lhs = Tmp_2 value = 524.288 } add_manpower = -524.288 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 262.144 } } subtract_key = { lhs = Tmp_2 value = 262.144 } add_manpower = -262.144 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 131.072 } } subtract_key = { lhs = Tmp_2 value = 131.072 } add_manpower = -131.072 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 65.536 } } subtract_key = { lhs = Tmp_2 value = 65.536 } add_manpower = -65.536 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 32.768 } } subtract_key = { lhs = Tmp_2 value = 32.768 } add_manpower = -32.768 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 16.384 } } subtract_key = { lhs = Tmp_2 value = 16.384 } add_manpower = -16.384 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 8.192 } } subtract_key = { lhs = Tmp_2 value = 8.192 } add_manpower = -8.192 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 4.096 } } subtract_key = { lhs = Tmp_2 value = 4.096 } add_manpower = -4.096 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 2.048 } } subtract_key = { lhs = Tmp_2 value = 2.048 } add_manpower = -2.048 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 1.024 } } subtract_key = { lhs = Tmp_2 value = 1.024 } add_manpower = -1.024 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.512 } } subtract_key = { lhs = Tmp_2 value = 0.512 } add_manpower = -0.512 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.256 } } subtract_key = { lhs = Tmp_2 value = 0.256 } add_manpower = -0.256 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.128 } } subtract_key = { lhs = Tmp_2 value = 0.128 } add_manpower = -0.128 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.064 } } subtract_key = { lhs = Tmp_2 value = 0.064 } add_manpower = -0.064 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.032 } } subtract_key = { lhs = Tmp_2 value = 0.032 } add_manpower = -0.032 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.016 } } subtract_key = { lhs = Tmp_2 value = 0.016 } add_manpower = -0.016 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.008 } } subtract_key = { lhs = Tmp_2 value = 0.008 } add_manpower = -0.008 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.004 } } subtract_key = { lhs = Tmp_2 value = 0.004 } add_manpower = -0.004 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.002 } } subtract_key = { lhs = Tmp_2 value = 0.002 } add_manpower = -0.002 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.001 } } subtract_key = { lhs = Tmp_2 value = 0.001 } add_manpower = -0.001 }
			}
			else_if = { # If (Manpower + Raised Regiments) - Maxmanpower < 0 --> replenish manpower by the result of the equation
				limit = {
					NOT = {	check_key = { lhs = Tmp_2 value = 0 } }
				}
				multiply_key = { lhs = Tmp_2 value = -1 }

				if = { limit = { check_key = { lhs = Tmp_2 value = 1048.576 } } subtract_key = { lhs = Tmp_2 value = 1048.576 } add_manpower = 1048.576 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 524.288 } } subtract_key = { lhs = Tmp_2 value = 524.288 } add_manpower = 524.288 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 262.144 } } subtract_key = { lhs = Tmp_2 value = 262.144 } add_manpower = 262.144 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 131.072 } } subtract_key = { lhs = Tmp_2 value = 131.072 } add_manpower = 131.072 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 65.536 } } subtract_key = { lhs = Tmp_2 value = 65.536 } add_manpower = 65.536 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 32.768 } } subtract_key = { lhs = Tmp_2 value = 32.768 } add_manpower = 32.768 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 16.384 } } subtract_key = { lhs = Tmp_2 value = 16.384 } add_manpower = 16.384 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 8.192 } } subtract_key = { lhs = Tmp_2 value = 8.192 } add_manpower = 8.192 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 4.096 } } subtract_key = { lhs = Tmp_2 value = 4.096 } add_manpower = 4.096 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 2.048 } } subtract_key = { lhs = Tmp_2 value = 2.048 } add_manpower = 2.048 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 1.024 } } subtract_key = { lhs = Tmp_2 value = 1.024 } add_manpower = 1.024 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.512 } } subtract_key = { lhs = Tmp_2 value = 0.512 } add_manpower = 0.512 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.256 } } subtract_key = { lhs = Tmp_2 value = 0.256 } add_manpower = 0.256 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.128 } } subtract_key = { lhs = Tmp_2 value = 0.128 } add_manpower = 0.128 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.064 } } subtract_key = { lhs = Tmp_2 value = 0.064 } add_manpower = 0.064 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.032 } } subtract_key = { lhs = Tmp_2 value = 0.032 } add_manpower = 0.032 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.016 } } subtract_key = { lhs = Tmp_2 value = 0.016 } add_manpower = 0.016 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.008 } } subtract_key = { lhs = Tmp_2 value = 0.008 } add_manpower = 0.008 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.004 } } subtract_key = { lhs = Tmp_2 value = 0.004 } add_manpower = 0.004 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.002 } } subtract_key = { lhs = Tmp_2 value = 0.002 } add_manpower = 0.002 }
				if = { limit = { check_key = { lhs = Tmp_2 value = 0.001 } } subtract_key = { lhs = Tmp_2 value = 0.001 } add_manpower = 0.001 }
			}

			export_to_key = {
				lhs = MP_MP
				value = manpower
			}

			change_key = { lhs = MP_MP which = MP_RaisedReg }
		}
	}

	option = {
		name = no_localisation
	}
}

country_event = {
    id = POP_Census.004
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
        Inst_DoInstitution = { name = Legalism }
		Inst_DoInstitution = { name = Meritocracy }
        Inst_DoInstitution = { name = Banking }
        Inst_DoInstitution = { name = Columbian_Exchange }
        Inst_DoInstitution = { name = Casual_Literacy }
        Inst_DoInstitution = { name = Global_Trade }
		Inst_DoInstitution = { name = Academia }
		Inst_DoInstitution = { name = Scientific_Method }
		Inst_DoInstitution = { name = Nationalism }
		Inst_DoInstitution = { name = Industrialisation }
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.116
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes
    
    is_triggered_only = yes
    trigger = {
        tag = AAA
    }

    immediate = {
       # every_province = {
       #     limit = {
       #         isValidProv = yes
       #     }
       #     Edu_DoProv = yes
       # }
       # every_country = {
       #     Edu_DoCountry = yes
       # }
       # every_province = {
       #     limit = {
       #         has_province_flag = Has_Uni
       #     }
       #     #log = "[This.GetName] Literacy Peasantry [This.GV_SF_Lit]"
       #     #log = "[This.GetName] Literacy Nomads [This.GV_NM_Lit]"
       #     #log = "[This.GetName] Literacy Residents [This.GV_RE_Lit]"
       #     #log = "[This.GetName] Literacy Nobles [This.GV_NO_Lit]"
       #     #log = "[This.GetName] Literacy Burghers [This.GV_BG_Lit]"
       #     #log = "[This.GetName] Literacy Clergy [This.GV_CL_Lit]"
       # }           
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.117
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes
    
    is_triggered_only = yes
    trigger = {
        tag = AAA
    }

    immediate = {
        if = {
            limit = {
                has_country_flag = Do_World_Edu
            }
            #WorldEducation = { cont = 1 }
            #WorldEducation = { cont = 7 }
            #WorldEducationAsia = { cont = 12 cont1 = 6 cont2 = 5 }
            #WorldEducation = { cont = 8 }
            #WorldEducation = { cont = 11 }
            clr_country_flag = Do_World_Edu
        }
        else = {
            set_country_flag = Do_World_Edu
        }
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.007
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
        every_country = {
            limit = {
                isValidCountry = yes
            }
            Stab_DoMain = yes
        }
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.008
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
        regiongroup = {
            region = {
                limit = {
                    isValidProv = yes
                }
                MN_CheckSlot = yes
            }
        }
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.009
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		if = {
			limit = {
				NOT = { is_year = 1358 }
			}
			every_country = { limit = { isValidCountry = yes ai = yes } 
				set_country_flag = ai_tax_recalc
				add_years_of_income = 2.5
			}
		}
		every_country = {
			limit = {
				has_country_flag = ai_tax_recalc
			}
			clr_country_flag = ai_tax_recalc

			if = {
				limit = {
					ai = yes
					
					isValidCountry = yes
				}
				country_event = {
					id = POP_Census.0092
				}
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.020
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		Prod_DoMain = yes
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0091
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		if = {
			limit = {
				OR = {
					tag = YUA
				}
			}
			set_key = { lhs = Tax_CostAdmInp value = 0.9 }
			set_key = { lhs = Tax_CostDipInp value = 0.9 }
			set_key = { lhs = Tax_CostMilInp value = 0.9 }
		}
		else_if = {
			limit = {
				OR = {
					tag = ENG
					tag = FRA
					is_vassal_of_trigger = { tag = FRA }
					is_vassal_of_trigger = { tag = ENG }
					tag = DLH
				}
			}
			set_key = { lhs = Tax_CostAdmInp value = 0.24 }
			set_key = { lhs = Tax_CostDipInp value = 0.24 }
			set_key = { lhs = Tax_CostMilInp value = 0.24 }
		}
		else = {
			set_key = { lhs = Tax_CostAdmInp value = 0.12 }
			set_key = { lhs = Tax_CostDipInp value = 0.12 }
			set_key = { lhs = Tax_CostMilInp value = 0.12 }
		}
		AI_TaxSet = {
			base = yes
			adm = Tax_CostAdmInp
			dip = Tax_CostDipInp
			mil = Tax_CostMilInp
		}
    }

    option = {
		name = no_localisation
    }
}
country_event = {
    id = POP_Census.0092
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		AI_TaxSet = { base = yes }
		#AI_SurpassesOrganics = { min=0.0 max=0.4 up=0.12 down=-0.03 }
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0093
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		every_country = {
			limit = {
				isValidCountry = yes
			}
			POP_GetAdminEffic = { return = Tax_AdminEffic }
			every_owned_province = {
				limit = {
					isValidProv = yes
				}
				Tax_CalcCosts = yes
			}
		}
    }

    option = {
		name = no_localisation
    }
}


country_event = {
    id = POP_Census.0094
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		every_country = {
			limit = {
				isValidCountry = yes
			}
			AI_TaxSet = {
				adm = Tax_CostAdmInp
				dip = Tax_CostDipInp
				mil = Tax_CostMilInp
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0095
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes
    is_triggered_only = yes

    immediate = {
		if = { limit = { religion = catholic } country_event = { id = DG_Papacy.001 days = 10 } }
		PAP = { country_event = { id = DG_Papacy.002 days = 10 } }
		if = {
			limit = { is_religion_enabled = waldensian }
			event_target:wal_origins = { province_event = { id = DG_Waldensians.118 days = 5 } }
 		}
		if = {
			limit = { is_religion_enabled = lollard }
			event_target:lol_origins = { province_event = { id = DG_Lollards.118 days = 6 } }
 		}
		if = {
			limit = { is_religion_enabled = hussite }
			event_target:hus_origins = { province_event = { id = DG_Hussites.118 days = 4 } }
 		}
		if = {
			limit = { is_religion_enabled = protestant }
			event_target:pro_origins = { province_event = { id = DG_Protestant.118 days = 2 } }
 		}
		if = {
			limit = { is_religion_enabled = reformed }
			event_target:ref_origins = { province_event = { id = DG_Reformed.118 days = 3 } }
 		}
	}

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.893
    title = POP_Census.893.t
    desc = POP_Census.893.d
	picture = ECONOMY_eventPicture

    is_triggered_only = yes

    option = {
		name = POP_Census.893.6
		custom_tooltip = POP_Census.893.6d
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_country_flag
				Tax_ScopeAll = {
					clr_country_flag = Tax_ScopeAll
					set_country_flag = Tax_ScopeSelected
				}
				Tax_ScopeSelected = {
					clr_country_flag = Tax_ScopeSelected
					set_country_flag = Tax_ScopeNonOverseas
				}
				Tax_ScopeNonOverseas = {
					clr_country_flag = Tax_ScopeNonOverseas
					set_country_flag = Tax_ScopeAll
				}
			}
			country_event = {
				id = POP_Census.894
			}
		}
    }
    option = {
		name = POP_Census.893.7
		custom_tooltip = POP_Census.893.7d
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = Tax_DelegationS
				}
				clr_country_flag = Tax_DelegationS
			}
			else = {
				set_country_flag = Tax_DelegationS
			}
			country_event = {
				id = POP_Census.894
			}
		}
    }
    option = {
		name = POP_Census.893.8
		custom_tooltip = POP_Census.893.8d
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = Tax_EventS
				}
				clr_country_flag = Tax_EventS
			}
			else = {
				set_country_flag = Tax_EventS
			}
			country_event = {
				id = POP_Census.894
			}
		}
    }
    option = {
		name = POP_Census.893.1
		custom_tooltip = POP_Census.893.1d
		
		country_event = {
			id = POP_Census.931
		}
    }
	option = {
		name = POP_Census.893.2
		custom_tooltip = POP_Census.893.2d
		
		country_event = {
			id = POP_Census.932
		}
    }
	option = {
		name = POP_Census.893.3
		custom_tooltip = POP_Census.893.3d
		
		country_event = {
			id = POP_Census.933
		}
    }
	option = {
		name = POP_Census.893.4
        highlight = yes
		custom_tooltip = POP_Census.893.4d
		
		hidden_effect = {
			every_owned_province = {
				clr_province_flag = PlayerTaxCost
			}
			if = {
				limit = {
					has_country_flag = Tax_ScopeSelected
				}
				every_owned_province = {
					limit = {
						has_province_flag = UI_Select
					}
					set_province_flag = PlayerTaxCost
				}
			}
			country_event = {
				id = POP_Census.934
			}
		}
    }
	
	option = {
        name = exit
        highlight = yes
    }
}
country_event = {
    id = POP_Census.894
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture
	
	hidden = yes
	
    is_triggered_only = yes

    option = {
		name = no_localisation
		
		country_event = {
			id = POP_Census.893
		}
    }
}

country_event = {
    id = POP_Census.934
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    is_triggered_only = yes
	
	hidden = yes
	
	immediate = {
		if = {
			limit = {
				has_country_flag = Tax_ScopeSelected
			}
			every_owned_province = {
				limit = {
					isValidProv = yes
					has_province_flag = PlayerTaxCost
				}
				set_province_flag = Tax_CostFlag
			}
		}
		else_if = {
			limit = {
				has_country_flag = Tax_ScopeAll
			}
			every_owned_province = {
				limit = {
					isValidProv = yes
				}
				set_province_flag = Tax_CostFlag
			}
		}
		else_if = {
			limit = {
				has_country_flag = Tax_ScopeNonOverseas
			}
			every_owned_province = {
				limit = {
					isValidProv = yes
					is_overseas = no
				}
				set_province_flag = Tax_CostFlag
			}
		}
			
		AI_TaxSet = {
			flag = yes
			adm = Tax_CostAdmInp
			dip = Tax_CostDipInp
			mil = Tax_CostMilInp
		}
		
		every_owned_province = {
			limit = {
				has_province_flag = Tax_CostFlag
			}
			clr_province_flag = Tax_CostFlag
		}
	}
	
	option = {
		name = no_localisation
	}
}

country_event = {
    id = POP_Census.931
    title = POP_Census.893.t
    desc = POP_Census.893.d
	picture = ECONOMY_eventPicture

    is_triggered_only = yes

    option = {
		name = POP_Census.893.1
		
		country_event = {
			id = POP_Census.935
		}
    }
    option = {
		name = POP_Census.931.1
		
		hidden_effect = {
			change_key = { lhs = Tax_CostAdmInp value = 10 }
			
			country_event = {
				id = POP_Census.935
			}
		}
    }
	option = {
		name = POP_Census.931.2
		
		hidden_effect = {
			change_key = { lhs = Tax_CostAdmInp value = 5 }
			
			country_event = {
				id = POP_Census.935
			}
		}
    }
	option = {
		name = POP_Census.931.3
		
		hidden_effect = {
			change_key = { lhs = Tax_CostAdmInp value = 1 }
			
			country_event = {
				id = POP_Census.935
			}
		}
    }
	
	option = {
		name = POP_Census.931.4
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostAdmInp value = 1 }
			
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostAdmInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostAdmInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.935
			}
		}
    }
	option = {
		name = POP_Census.931.5
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostAdmInp value = 5 }
			
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostAdmInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostAdmInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.935
			}
		}
    }
	option = {
		name = POP_Census.931.6
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostAdmInp value = 10 }
		
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostAdmInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostAdmInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.935
			}
		}
    }
	
	option = {
        name = back
        highlight = yes
		
		country_event = {
			id = POP_Census.893
		}
    }
}
country_event = {
    id = POP_Census.935
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture
	
	hidden = yes
	
    is_triggered_only = yes

    option = {
		name = no_localisation
		
		country_event = {
			id = POP_Census.931
		}
    }
}

country_event = {
    id = POP_Census.932
    title = POP_Census.893.t
    desc = POP_Census.893.d
	picture = ECONOMY_eventPicture

    is_triggered_only = yes

    option = {
		name = POP_Census.893.2
		
		country_event = {
			id = POP_Census.936
		}
    }
    option = {
		name = POP_Census.932.1
		
		hidden_effect = {
			change_key = { lhs = Tax_CostDipInp value = 10 }
			
			country_event = {
				id = POP_Census.936
			}
		}
    }
	option = {
		name = POP_Census.932.2
		
		hidden_effect = {
			change_key = { lhs = Tax_CostDipInp value = 5 }
			
			country_event = {
				id = POP_Census.936
			}
		}
    }
	option = {
		name = POP_Census.932.3
		
		hidden_effect = {
			change_key = { lhs = Tax_CostDipInp value = 1 }
			
			country_event = {
				id = POP_Census.936
			}
		}
    }
	
	option = {
		name = POP_Census.932.4
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostDipInp value = 1 }
			
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostDipInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostDipInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.936
			}
		}
    }
	option = {
		name = POP_Census.932.5
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostDipInp value = 5 }
			
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostDipInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostDipInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.936
			}
		}
    }
	option = {
		name = POP_Census.932.6
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostDipInp value = 10 }
		
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostDipInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostDipInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.936
			}
		}
    }
	
	option = {
        name = back
        highlight = yes
		
		country_event = {
			id = POP_Census.893
		}
    }
}
country_event = {
    id = POP_Census.936
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture
	
	hidden = yes
	
    is_triggered_only = yes

    option = {
		name = no_localisation
		
		country_event = {
			id = POP_Census.932
		}
    }
}

country_event = {
    id = POP_Census.933
    title = POP_Census.893.t
    desc = POP_Census.893.d
	picture = ECONOMY_eventPicture

    is_triggered_only = yes

    option = {
		name = POP_Census.893.3
		
		country_event = {
			id = POP_Census.937
		}
    }
    option = {
		name = POP_Census.933.1
		
		hidden_effect = {
			change_key = { lhs = Tax_CostMilInp value = 10 }
			
			country_event = {
				id = POP_Census.937
			}
		}
    }
	option = {
		name = POP_Census.933.2
		
		hidden_effect = {
			change_key = { lhs = Tax_CostMilInp value = 5 }
			
			country_event = {
				id = POP_Census.937
			}
		}
    }
	option = {
		name = POP_Census.933.3
		
		hidden_effect = {
			change_key = { lhs = Tax_CostMilInp value = 1 }
		
			country_event = {
				id = POP_Census.937
			}
		}
    }
	
	option = {
		name = POP_Census.933.4
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostMilInp value = 1 }
			
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostMilInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostMilInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.937
			}
		}
    }
	option = {
		name = POP_Census.933.5
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostMilInp value = 5 }
			
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostMilInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostMilInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.937
			}
		}
    }
	option = {
		name = POP_Census.933.6
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostMilInp value = 10 }
		
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostMilInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostMilInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.937
			}
		}
    }
	
	option = {
        name = back
        highlight = yes
		
		country_event = {
			id = POP_Census.893
		}
    }
}
country_event = {
    id = POP_Census.937
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture
	
	hidden = yes
	
    is_triggered_only = yes

    option = {
		name = no_localisation
		
		country_event = {
			id = POP_Census.933
		}
    }
}

country_event = {
    id = POP_Census.103
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
        Concern_DoIterMain = yes
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.105
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
        regiongroup = {
            region = {
                limit = {
                    isValidProv = yes
                }
                Dev_DoMain = { iterate=yes }
            }
        }
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.106
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
        every_country = {
			limit = {
				isValidCountry = yes
			}
            every_owned_province = {
                limit = {
					OR = {
						has_province_flag = Unrest_Update
						PREV = { has_country_flag = Unrest_Update }
					}
                    isValidProv = yes
                }
				clr_province_flag = Unrest_Update
                Unrest_DoMain = yes
            }
			clr_country_flag = Unrest_Update
        }
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.107
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		regiongroup = {
			region = {
				limit = {
                
                    isValidProv = yes
                    
					check_key = { lhs = Infra_Wealth value = 200 }
					check_key = { lhs = Infra_Fill value = 100 }
					
					

					OR = {
						NOT = { has_province_flag = Infra_S0 }
						NOT = { has_province_flag = Infra_S1 }
						NOT = { has_province_flag = Infra_S2 }
						NOT = { has_province_flag = Infra_S3 }
						NOT = { has_province_flag = Infra_S4 }
						NOT = { has_province_flag = Infra_S5 }
						NOT = { has_province_flag = Infra_S6 }
						NOT = { has_province_flag = Infra_S7 }
						NOT = { has_province_flag = Infra_S8 }
						NOT = { has_province_flag = Infra_S9 }
					}

					NOT = {
						check_key = { lhs = Infra_S0 value = 8 }
						check_key = { lhs = Infra_S1 value = 8 }
						check_key = { lhs = Infra_S2 value = 8 }
						check_key = { lhs = Infra_S3 value = 8 }
						check_key = { lhs = Infra_S4 value = 8 }
						check_key = { lhs = Infra_S5 value = 8 }
						check_key = { lhs = Infra_S6 value = 8 }
						check_key = { lhs = Infra_S7 value = 8 }
						check_key = { lhs = Infra_S8 value = 8 }
						check_key = { lhs = Infra_S9 value = 8 }
					}
				}
				set_key = { lhs = Tmp_0 which = Infra_Wealth }
				multiply_key = { lhs = Tmp_0 value = 0.25 }
				divide_key = { lhs = Tmp_0 value = 2 }

				set_key = { lhs = Tmp_1 value = 0.01 }
				set_key = { lhs = Tmp_2 value = 0 }
				
				# Pathing
				Infra_GetAppealInfra = { type = Pathing weightNO = 0.5 weightBG = 0.5 weightCL = 0.5 nomad = yes return = Tmp_3 }
                if = { limit = { check_key = { lhs = Tmp_3 which = Tmp_1 } } set_key = { lhs = Tmp_1 which = Tmp_3 } set_key = { lhs = Tmp_2 value = 1 } }
				
				# Harbourage and Amenities only if there is enough resident population
				if = {
					limit = {
						OR = {
							check_key = { lhs = RE_Total value = 2  }
							has_global_flag = POP_Sim
						}
					}
					if = { 
						limit = {
							Infra_CanHarbourage = yes							
						}
						Infra_GetAppealInfra = { type = Harbourage weightNO = 0.25 weightBG = 2 weightCL = 0.25 return = Tmp_3 }
						if = { limit = { check_key = { lhs = Tmp_3 which = Tmp_1 } } set_key = { lhs = Tmp_1 which = Tmp_3 } set_key = { lhs = Tmp_2 value = 2 } }
					}					
					
					if = { 
						limit = { 
							always = yes 
						}
						Infra_GetAppealInfraAmenities = { type = Amenities weightNO = 0.8 weightBG = 8 weightCL = 0.8 urban = yes return = Tmp_3 }
						if = { limit = { check_key = { lhs = Tmp_3 which = Tmp_1 } } set_key = { lhs = Tmp_1 which = Tmp_3 } set_key = { lhs = Tmp_2 value = 3 } } 
					}
				}
                
				# Irrigation
				Infra_GetAppealInfra = { type = Irrigation weightNO = 2 weightBG = 0.25 weightCL = 0.5 rural = yes nomad = yes return = Tmp_3 }
                if = { limit = { check_key = { lhs = Tmp_3 which = Tmp_1 } } set_key = { lhs = Tmp_1 which = Tmp_3 } set_key = { lhs = Tmp_2 value = 4 } }
				
				# Deprecated Courthouse 
				#Infra_GetAppealInfra = { type = Courthouse weightNO = 0 weightBG = 0 weightCL = 0.25 return = Tmp_3 }
				#if = { limit = { check_key = { lhs = Tmp_3 which = Tmp_1 } } set_key = { lhs = Tmp_1 which = Tmp_3 } set_key = { lhs = Tmp_2 value = 5 } }
				# Deprecated Courthouse

				Infra_GetAppealInfra = { type = Garrison weightNO = 0.4 weightBG = 0.2 weightCL = 0.2 nomad = yes return = Tmp_3 }
				if = { limit = { check_key = { lhs = Tmp_3 which = Tmp_1 } } set_key = { lhs = Tmp_1 which = Tmp_3 } set_key = { lhs = Tmp_2 value = 6 } }

				if = {
					limit = {
						check_key = { lhs = Tmp_2 value = 1 }
					}
					if = {
						limit = {
							is_key_equal = { lhs = Tmp_2 value = 1 }
						}
						if = {
							limit = {
								check_key = { lhs = Tmp_0 which = Infra_PathingSizeCost1 }
							}
							set_key = { lhs = Tmp_9 value = 2 }
                            Infra_StartProject = { id = 8 height = Tmp_9 width = Tmp_9 }
						}
					}
					else_if = {
						limit = {
							is_key_equal = { lhs = Tmp_2 value = 2 }
						}
						if = {
							limit = {
								check_key = { lhs = Tmp_0 which = Infra_HarbourageSizeCost1 }
							}
							set_key = { lhs = Tmp_9 value = 2 }
                            
							Infra_StartProject = { id = 9 height = Tmp_9 width = Tmp_9 }
						}
					}
					else_if = {
						limit = {
							is_key_equal = { lhs = Tmp_2 value = 3 }
						}
						if = {
							limit = {
								check_key = { lhs = Tmp_0 which = Infra_AmenitiesSizeCost1 }
							}
							set_key = { lhs = Tmp_9 value = 2 }
                            #log = "[This.GetName] wants to start Amenities"
							Infra_StartProject = { id = 10 height = Tmp_9 width = Tmp_9 }
						}
					}
					else_if = {
						limit = {
							is_key_equal = { lhs = Tmp_2 value = 4 }
						}
						if = {
							limit = {
								check_key = { lhs = Tmp_0 which = Infra_IrrigationSizeCost1 }
							}
							set_key = { lhs = Tmp_9 value = 2 }
                            Infra_StartProject = { id = 11 height = Tmp_9 width = Tmp_9 }
						}
					}
					#else_if = {
					#	limit = {
					#		is_key_equal = { lhs = Tmp_2 value = 5 }
					#	}
					#	if = {
					#		limit = {
					#			check_key = { lhs = Tmp_0 which = Infra_CourthouseSizeCost1 }
					#		}
					#		set_key = { lhs = Tmp_9 value = 2 }
					#
					#		Infra_StartProject = { id = 13 height = Tmp_9 width = Tmp_9 }
					#	}
					#}
					else_if = {
						limit = {
							is_key_equal = { lhs = Tmp_2 value = 6 }
						}
						if = {
							limit = {
								check_key = { lhs = Tmp_0 which = Infra_GarrisonSizeCost1 }
							}
							set_key = { lhs = Tmp_9 value = 2 }

							Infra_StartProject = { id = 14 height = Tmp_9 width = Tmp_9 }
						}
					}
				}

				set_key = { lhs = Tmp_0 value = 0 }
				set_key = { lhs = Tmp_1 value = 0 }
				set_key = { lhs = Tmp_2 value = 0 }
				set_key = { lhs = Tmp_3 value = 0 }
				set_key = { lhs = Tmp_9 value = 0 }
			}
		}

		regiongroup = {
			region = {
				limit = {
					isValidProv = yes
				}
				Infra_RefreshModifier = yes
			}
		}
    }

    option = {
		name = no_localisation
    }
}

# Mercenary stats and AI disbanding census
country_event = {
    id = POP_Census.108
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
        every_country = {
            limit = {
                isValidCountry = yes
            }
			Merc_Update = yes

			## AI section to disband mercs after being at peace
			if = {
				limit = {
					is_month = 11
					ai = yes
					is_at_war = no
					had_recent_war = 3
				}
				while = {
					limit = {
						num_of_mercenaries = 1
					}
					random_hired_mercenary_company = {
						disband_mercenary_company = THIS
					}
				}
			}
        }
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.110
    title = POP_Census.110.t
    desc = POP_Census.110.d
	picture = ECONOMY_eventPicture

    is_triggered_only = yes

    immediate = {
	}

    option = {
		name = Tax_CostAdm
		
		custom_tooltip = Tax_CostAdmSub
		custom_tooltip = Tax_Warning
		
		ai_chance = {
			factor = 0
		}
	}

    option = {
		name = Tax_CostDip
		
		custom_tooltip = Tax_CostDipSub
		custom_tooltip = Tax_Warning
		
		ai_chance = {
			factor = 0
		}
	}

    option = {
		name = Tax_CostMil
		
		custom_tooltip = Tax_CostMilSub
		custom_tooltip = Tax_Warning
		
		ai_chance = {
			factor = 0
		}
	}

    option = {
		name = PTM_EXIT
		highlight = yes
		custom_tooltip = Tax_Warning
		
		ai_chance = {
			factor = 100
		}
	}
}

country_event = {
    id = POP_Census.1102
    title = POP_Census.1102.t
    desc = POP_Census.1102.d
	picture = MEIOU_AND_TAXES_eventPicture

    is_triggered_only = yes
	
	hidden = yes

    immediate = {
		every_country = {
			limit = {
				isValidCountry = yes
			}
			if = {
				limit = {
					ai = no
				}
				if = {
					limit = {
						has_country_flag = Tax_DelegationS
					}
					hidden_effect = {
						country_event = { id = POP_Census.934 }
					}
				}
				if = {
					limit = {
						has_country_flag = Tax_EventS
					}
					country_event = { id = POP_Census.110 days = 1 }
				}
			}
			else_if = {
				limit = {
					is_at_war = yes
				}
				set_country_flag = ai_tax_recalc
			}
			Tax_Update = yes
		}
    }

    option = {
		name = PTM_EXIT
	}
}

country_event = {
    id = POP_Census.111
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture
	
	hidden = yes
    is_triggered_only = yes

    immediate = {
		every_country = {
			limit = {
				isValidCountry = yes
			}
			add_country_modifier = {
				name = Advisordata
				duration = -1
			}
			Advisor_SetData = yes
		}
	}

    option = {
		name = PTM_EXIT
	}
}

country_event = {
    id = POP_Census.112
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture
	
	hidden = yes
    is_triggered_only = yes

    immediate = {
		Post_Main = yes
	}

    option = {
		name = PTM_EXIT
	}
}

country_event = {
    id = POP_Census.113
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
        every_owned_province = {
			limit = {
				isValidProv = yes
			}
			Unrest_DoMain = yes
        }
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.114
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		every_country = {
			limit = {
				isValidCountry = yes
			}
			if = {
				limit = { NOT = { is_month = 5 } }
				if = { # Remove Exploration idea group from CNs who get it on spawn
					limit = {
						is_colonial_nation = yes
						has_idea_group = exploration_ideas
					}
					remove_idea_group = exploration_ideas
				}
				if = { # Every other year expeditions are skipped during exploration ideas
					limit = {
						has_country_flag = MEC_Expeditions_skip_year
					}
					clr_country_flag = MEC_Expeditions_skip_year
				}
				else = {
					country_event = { id = MEC_Expeditions.003 days = 20 } # Expedition selection event from exploration ideas
				}
			}
			tech_add_modifiers_all = yes
		}
    }

    option = {
		name = no_localisation
    }
}

# Estate UI Piechart Data Update
country_event = {
    id = POP_Census.992
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		every_country = {
			limit = {
				ai = no
				isValidCountry = yes
			}
			PieChart_ReloadData = yes
		}
	}

    option = {
		name = no_localisation
	}
}

# Estate UI Piechart Data Update - for specific country
country_event = {
    id = POP_Census.9921
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		if = {
			limit = {
				ai = no
			}
			PieChart_ReloadData = yes
		}
	}

    option = {
		name = no_localisation
	}
}

# Province census
country_event = {
    id = POP_Census.993
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		every_country = {
			limit = {
				has_country_flag = Nat_Update
				ai = yes
				isValidCountry = yes
			}
			clr_country_flag = Nat_Update
			Nat_Fast = yes
		}
	}

    option = {
		name = no_localisation
	}
}
# Single Country
country_event = {
    id = POP_Census.994
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		Nat_Main = yes
	}

    option = {
		name = no_localisation
	}
}


# Data collection Province
country_event = {
    id = POP_Census.995
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

	trigger = {
		tag = AAA
		OR = {
			had_global_flag = { 
				flag = DATA_COLLECTION_CD 
				days = 9125
			}
			has_global_flag = first_time_data_collection
		}
	}

    is_triggered_only = yes

	immediate = {
		clr_global_flag = DATA_COLLECTION_CD
		
		### OUTPUT DATA COUNTRY:
		every_country = {
		    limit = { 
		        isValidCountry = yes
		    }
			# Rights
			log = "Rights; Year; Country; NOGov; NOObl; NOTen; NOSer; BGCom; BGGov; CLHie; CLTax; CLObl; BUTax; BUDir; BUInd; BUSer"
			log = "Rights;[GetYear];[This.GetName];[GV_Rights_NOGov];[GV_Rights_NOObl];[GV_Rights_NOTen];[GV_Rights_NOSer];[GV_Rights_BGCom];[GV_Rights_BGGov];[GV_Rights_CLHie];[GV_Rights_CLTax];[GV_Rights_CLObl];[GV_Rights_BUTax];[GV_Rights_BUDir];[GV_Rights_BUInd];[GV_Rights_BUSer]"
			
			#Privileges
			log = "Privileges1; Year; Country; NOProcessing; NOGame; NOForestry; NOSeigneurial; NOAutonomy; NODiplomacy; NODynastic; NOHierarchy; NOTaxE; NOServiceE"
			log = "Privileges1;[GetYear];[This.GetName];[GV_Privilege_NOProcessing];[GV_Privilege_NOGame];[GV_Privilege_NOForestry];[GV_Privilege_NOSeigneurial];[GV_Privilege_NOAutonomy];[GV_Privilege_NODiplomacy];[GV_Privilege_NODynastic];[GV_Privilege_NOHierarchy];[GV_Privilege_NOTaxE];[GV_Privilege_NOServiceE]"
			log = "Privileges2;Year;BUOffice;BUFarm; BUTenure; BUWages; BUHierarchy; BUHire; BUExams; BUOversight; BUEnlist; BUStructure; BUCourts; BUPolitics; BURotate"
			log = "Privileges2;[GetYear];[GV_Privilege_BUOffice];[GV_Privilege_BUFarm];[GV_Privilege_BUTenure];[GV_Privilege_BUWages];[GV_Privilege_BUHierarchy];[GV_Privilege_BUHire];[GV_Privilege_BUExams];[GV_Privilege_BUOversight];[GV_Privilege_BUEnlist];[GV_Privilege_BUStructure];[GV_Privilege_BUCourts];[GV_Privilege_BUPolitics];[GV_Privilege_BURotate]"
		}

		### OUTPUT DATA PROVINCE:
		log = "ID;Class_type;Region;Life;Comfort;Luxury;FoodPrice;SaltPrice;FibrePrice;FuelPrice;RawPrice;DelicaciesPrice;ExoticsPrice;ConsumerPrice;MilitaryPrice;NavalPrice;IndustrialPrice;LuxuryPrice;KnowledgePrice;TN_ProvPrc51"
		every_province = {
		    limit = { 
		        OR = {
		        	is_city = yes
		        	is_colony = yes
		   		}
		    	has_province_flag = Data
		    }
		    log = "[This.aab.GetValue];Peasants;[This.aae.GetValue];[This.adf.GetValue];[This.akq.GetValue];[This.akr.GetValue];[This.agp.GetValue];[This.agq.GetValue];[This.agr.GetValue];[This.ags.GetValue];[This.agt.GetValue];[This.agu.GetValue];[This.agv.GetValue];[This.agw.GetValue];[This.agx.GetValue];[This.agy.GetValue];[This.agz.GetValue];[This.aha.GetValue];[This.ahb.GetValue];[This.ahc.GetValue]"
		    log = "[This.aab.GetValue];Residents;[This.aae.GetValue];[This.adj.GetValue];[This.aku.GetValue];[This.akv.GetValue]"
		}
	}

	option = {
		name = EXIT
	}
	after = {
		set_global_flag = DATA_COLLECTION_CD
	}
}

# Province census
country_event = {
    id = POP_Census.996
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
	
	trigger = {
		tag = AAA
	}

    immediate = {
		every_province = {
			limit = {
				isValidEmpty = yes
			}
			if = {
				limit = {
					OR = {
						is_city = yes
						is_colony = yes
					}
				}
				if = {
					limit = {
						NOT = { has_province_flag = Colony_Init }
					}
					owner = {
						set_country_flag = tf_recalculate_communication_efficiency
					}
					province_event = {
						id = SYS_Colony.001
					}
				}
			}
			Plague_Tick = yes
			Modi_UpdatePopWealth = yes
		}
	}
	
	option = {
		name = no_localisation
	}
}

# Country census
country_event = {
    id = POP_Census.997
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
	
	trigger = {
		tag = AAA
	}

    immediate = {
		every_country = {
			limit = {
				NOT = { has_country_flag = POP_Init }
				isValidCountry = yes
			}
			Init_Main = yes
			set_country_flag = POP_Init
		}
		every_country = {
			limit = {
				isValidCountry = yes
			}			
			rank_change_effect = yes
			#add_country_modifier = {
			#	name = Advisordata
			#	duration = -1
			#}
			if = {
				limit = {
					OR = {
						ai = no
						NOT = { is_month = 2 }
						AND = {
							is_month = 7
							NOT = { is_month = 8 }
						}
					}
				}
				Advisor_SetData = yes
			}
			#FC_MiniCensus = yes
			if = {
				limit = {
					ai = no
					check_key = { lhs = Rights_Timer value = 1 }
				}
				subtract_key = { lhs = Rights_Timer value = 1 }
				if = {
					limit = {
						NOT = { check_key = { lhs = Rights_Timer value = 1 } }
					}
					Rights_ImplementReform = yes
				}
			}
			if = {
				limit = {
					has_country_flag = tf_recalculate_communication_efficiency
				}
				clr_country_flag = tf_recalculate_communication_efficiency
				country_event = { id = phlopsi_ce_main.1 }
			}
			Diplomacy_Do_Monthly = yes
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.998
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
	
	trigger = {
		tag = AAA
	}

    immediate = {
		every_country = {
			if = {
				limit = {
					OR = {
						NOT = { num_of_cities = 1 }
						exists = no
					}
					NOT = { tag = AAA }
				}
				clr_country_flag = POP_Init
				set_key = { lhs = Vassal_Type value = 0 }
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.999
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		5511 = {
			kill_units = {
				who = REB
			}
			every_country = {
				limit = {
					isValidCountry = yes
				}
				PREV = {
					kill_units = {
						who = PREV
					}
				}
			}
			
			dummy0_rebels = 1
			dummy1_rebels = 1
			
			every_country = {
				limit = {
					isValidCountry = yes
				}
				PREV = {
					discover_country = PREV
					
					mercenary_infantry = PREV
				}
				
				set_key = { lhs = Tmp_1 value = 10 }
				divide_key = { lhs = Tmp_1 value = 0.8 }
				
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 327.68 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 163.84 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 81.92 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 40.96 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 20.48 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 10.24 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 5.12 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 2.56 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 1.28 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 0.64 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 0.32 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 0.16 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 0.08 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 0.04 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 0.02 }
				POP_SetMod = { varname = Tmp_1 modname = Mil_Maint type = country value = 0.01 }
			}
		}
    }

    option = {
		name = no_localisation
    }
}
